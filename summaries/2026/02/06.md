# Activity Summary for 6/2/2026

## 0:05:10
The provided log details code changes across various JavaScript and SCSS files, primarily within a Smart TV application project, with a strong focus on UI/UX, navigation, and platform-specific adaptations.

### File-Specific Updates:

*   **`c:\Users\Usuario\Documents\Trabajo\3cat_pro\gateway\js\app.js` (2/2/2026, 14:16:27)**
    *   This file handles the initial application startup, determining the WebOS SDK version to configure the correct connection manager (`WEBOS_MANAGER` or `PALM_MANAGER`) and a remote URL (`REMOTE`).
    *   It checks for internet connectivity. If available, it redirects the user; otherwise, it displays an alert and sets up a `keydown` listener for the back button to exit the platform.
    *   A subscription to the connection manager's status is established to react to changes in internet availability, automatically redirecting to the `REMOTE` URL if connectivity is restored.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\mediaInfo\infoGroup\index.jsx` (2/2/2026, 16:31:34)**
    *   This component is responsible for rendering detailed media information (title, description, duration, age rating, tags, etc.).
    *   It includes logic for displaying episode and season counts, with a comment mentioning `CCMA-1685`.
    *   A significant commented-out section (`JIRA CCMA-2104`) indicates the removal of "A partir del" (available from) publication functionality.
    *   It differentiates rendering based on item properties like `is_episode`, `isLive`, `isUpcomingEvent`, `tag_format`, and `collection`.
    *   New `is_external` and `external_content_data` properties are introduced to display external platform logos and tags.
    *   Calculations are performed to determine whether to show separator dots between various media info elements.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\mediaInfo\mediaTitle\styles.scss` (2/2/2026, 16:33:36)**
    *   This SCSS file defines styles for media titles.
    *   It introduces specific styling for different title types like `.title_program`, `.live`, `.isLive_or_upcoming_event`, `.stream`, and `.menu_detail`, primarily adjusting font-weight and font-size. An `.external` class also modifies font-size.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\items\rowItems\portraitItem\styles.scss` (2/2/2026, 16:39:57)**
    *   Styles for portrait-oriented items in rows.
    *   Focus states (`.focused`, `:hover`) are defined with a red box-shadow and outline.
    *   Includes styles for a tag (white background, black text, rounded corners) and a `platform-logo` for external content, positioned at the bottom-left of the item.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\keyboard\styles.scss` (Multiple timestamps: 2/2/2026, 16:56:08 & 2/2/2026, 17:09:25)**
    *   This file defines the styling for an on-screen keyboard.
    *   Key elements (`.keyboard-key`) have dark backgrounds, white text, and rounded corners.
    *   It defines different sizes for keys (`.SMALL`, `.MEDIUM`, `.LARGE`) and uses background images for special keys like backspace, spacebar, and return.
    *   The `:hover` state for keyboard keys was added at 17:09:25, providing visual feedback with a red box-shadow and border, matching the `.focused` state.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\platform\generic.js` (Multiple timestamps: 2/2/2026, 17:08:44 & 5/2/2026, 13:32:40)**
    *   This file handles generic keyboard navigation and player control for Smart TVs.
    *   It initializes `window.AppGlobal.KeyMemory` to track key combinations, which can trigger specific actions (e.g., enabling/disabling ads with "123" or "321").
    *   The `onKeyDownHandler` processes various key codes (arrows, enter, back, player controls) and dispatches navigation or player actions.
    *   Platform-specific key codes are handled for WebOS and Tizen.
    *   A significant change at 5/2/2026, 13:32:40 involved commenting out the `e.preventDefault()` and `e.stopPropagation()` from `onKeyDownHandler` and commenting out the `dispatchRewindEvent()` and `dispatchFastForwardEvent()` calls within the platform-specific `switch` statements, indicating a potential change in event handling or player control logic.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\sideMenu\index.jsx` (Multiple timestamps: 2/2/2026, 17:36:09 & 2/2/2026, 17:36:22)**
    *   This component manages the application's side menu, including navigation logic and user-specific menu options (e.g., for kids' profiles).
    *   It uses React hooks for state management and effects, reacting to location changes and user authentication status.
    *   The `AppMenuCreate` function initializes global `window.AppMenu.vars` for menu state.
    *   It dynamically generates L1 and L2 menu data based on user type and settings.
    *   Includes logic to attach a "Search" option at the beginning of the menu data.
    *   The two timestamps show almost identical code, with a minor addition in the `useEffect` hook at `17:36:22` to set `window.__isEntry = isMenuVisible;`, which was commented out in the prior version.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\views\onboarding\usersScreen\index.jsx` (Multiple timestamps between 2/2/2026, 17:45:11 and 2/2/2026, 18:14:59)**
    *   This screen displays a list of users, including "Super3" (kids' profile) and an option to add a new user.
    *   It manages user selection, redirection, and authentication context.
    *   Multiple small changes across several timestamps primarily involve commenting/uncommenting the `window.__isEntry` assignment and introducing a `window.__foceEntry` variable with a `useEffect` hook to set and reset it, suggesting debugging or temporary changes related to entry point handling. The core functionality remains consistent: displaying user bubbles and handling user/kid/guest selection and navigation.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\utils\goBackHistory.js` (2/2/2026, 18:15:16)**
    *   The `goBackHistory` function now checks for `window.__isEntry` or `window.__foceEntry` variables in addition to specific paths (`/welcomeScreen`, `/home`, `/`) to trigger a callback function for exiting the app.
    *   It also adds specific handling for the media player (to hide audio/subs menu) before performing a standard `history.go(-1)`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\App.jsx` (Multiple timestamps between 2/2/2026, 18:50:50 and 2/2/2026, 19:14:36)**
    *   This is the main application component, setting up routing, context providers, and global actions.
    *   It defines `InitDevConsole` for a custom debug console and `InitApp` for platform initialization.
    *   The `BuildInfo` component displays various environment and build details based on `window.appConfig.test_app` flags.
    *   The `AppInner` component handles modals (exit, logout), user authentication redirects, and defines routes for various views.
    *   Multiple minor changes across these timestamps relate to the `openExitAppModal` function. Initially, it sets `window.isUserModalVisible = true` and `nav.storedFocus`, then comments these out temporarily (e.g., 18:51:35), then reintroduces them (e.g., 18:54:07). At 18:52:39, `window.AppMenu.manageFocused?.()` was briefly added to `openExitAppModal`. These changes suggest an iterative process of refining modal visibility and focus management.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\build_templates\tizen\3cat_pro\config.xml` (Multiple timestamps: 3/2/2026, 13:24:24, 5/2/2026, 10:47:12 & 5/2/2026, 11:41:17)**
    *   This XML file configures the Tizen application.
    *   At `5/2/2026, 10:47:12`, the `id` attribute of the `<widget>` element was changed from `"http://tizen.tv3.ccma.cat.qa"` to `"http://tizen.qa.ccma.cat"`, and the `id` and `package` attributes of the `<tizen:application>` element were updated (e.g., `PzkKxRdFT6.TV3.qa` to `PzkKxRdFT6qa.TV3`). These changes likely reflect a shift in application identifier or environment (e.g., from a general QA to a more specific QA identifier). The subsequent change at `5/2/2026, 11:41:17` shows no functional changes from the previous one.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\items\rowItems\roundItem\index.jsx` (Multiple timestamps between 4/2/2026, 11:36:24 and 4/2/2026, 14:01:29)**
    *   This component renders round-shaped items in rows, often used for categories or profiles.
    *   Initial changes involve uncommenting logic to handle `isKidsProfile` and find "round" images.
    *   Later changes at `4/2/2026, 12:08:06` modify the `image_format` search for `isKidsProfile` from `'round'` to `'big-round'`.
    *   Subsequent changes (e.g., `12:21:39`) simplify image type checks, removing `isKidsProfile` from the `useMemo` dependency and the class assignment. This logic is then reintroduced with `isBigRound` property and explicit `big-round` image format search for kids mode, as well as the addition of `data-nav-fixed-focus-shape` set to `bigRound` or `round`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\items\rowItems\roundItem\styles.kids.scss` (Multiple timestamps between 4/2/2026, 12:22:36 and 4/2/2026, 14:12:14)**
    *   This file provides kid-mode specific styling for `roundElement`.
    *   Initially set `background-color` and `border` to `$base-color-3cat-kid-bright-purple` when focused (`12:23:43`), but later reverted the border (`12:25:30`) and eventually simplified to just setting the background color.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\fixedFocus\fixedFocus.kids.scss` (Multiple timestamps between 4/2/2026, 12:26:49 and 4/2/2026, 14:14:40)**
    *   This file defines kid-mode styles for the fixed focus indicator.
    *   Changes iterate on the `box-shadow` and `border-color` for the `.inner` element, consistently using `$base-color-3cat-kid-light-purple`.
    *   There were several attempts to define specific styles for `.round` focus shape (e.g., setting `width`, `height`, `box-shadow`, `border`) and then commenting/removing them (e.g., `12:30:18` to `12:35:49`), before reintroducing and refining them. The final change at `14:14:40` removes `outline: 0px;` for `.round` and `.bigRound` focus shapes.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\rowUtils.js` (Multiple timestamps: 4/2/2026, 12:01:27 & 4/2/2026, 12:01:36)**
    *   The `getRowkind` function, which determines the type of row based on `rowData` properties, was updated to correctly identify `ROUND` rows.
    *   Specifically, `rowData.format === 'square-mini'` was changed to `rowData.format === 'square_mini'`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\genericRow\index.jsx` (Multiple timestamps between 4/2/2026, 12:02:26 and 4/2/2026, 12:54:35)**
    *   This component renders various types of content rows.
    *   Updated `getRowElement` to include `SQUARE_MINI` (mapping to `SquareItem`).
    *   Updated `getShowAllElementsFocusShape` to include `SQUARE_MINI` (mapping to `'square'`).
    *   At `4/2/2026, 12:49:54`, the `isKidsProfile && <div className="roundItemTitle">{item.title}</div>` was added at the end of the component's return, but then removed at `12:54:35`, suggesting temporary or experimental UI elements.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\genericRow\styles.scss` (4/2/2026, 12:48:42)**
    *   Styles for generic rows, including various row types like `HERO`, `LANDSCAPE`, `USER_ROW`, `SQUARE`, `LIVE_TV`, `PORTRAIT`, `LANDSCAPE_MINI`, `INLINE`, `FEATURED`, `LAST_DAYS`.
    *   Defines specific widths, heights, and padding for different row types.
    *   Styles for the `item-show-all` element are also defined, including its icon and hover/focus states.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\roundRow\index.jsx` (Multiple timestamps between 4/2/2026, 12:27:53 and 4/2/2026, 13:42:39)**
    *   This component renders rows specifically for round items.
    *   It initially included `styles.kids.scss` which was then removed (`12:30:58`).
    *   The `isKidsProfile` prop was removed from the `RoundItem` and `textAlign` style was changed to always `left` at `12:56:05`.
    *   Later, `isBigRound` prop was introduced, influencing both `textAlign` and the root div's class name (`biground_row` or `round_row`). It also adds a `roundItemTitle` for `isBigRound` items. This suggests a new design for displaying larger round items, possibly for kids' profiles, but handled with a more generic `isBigRound` prop.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\roundRow\styles.scss` (Multiple timestamps: 4/2/2026, 12:28:04 & 4/2/2026, 13:40:37)**
    *   Styles for `round_row`.
    *   At `13:40:37`, a new `.biground_row` class was introduced with a larger height, and common styles were grouped for both `round_row` and `biground_row`. Also introduced `roundItemTitle` styles.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\roundRow\styles.kids.scss` (Multiple timestamps: 4/2/2026, 12:30:18)**
    *   Contains a commented-out style for `round_row` height in kid mode, indicating a possible future or discarded styling.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\views\page\index.jsx` (Multiple timestamps between 4/2/2026, 13:25:55 and 4/2/2026, 13:34:44)**
    *   This component fetches and renders page data, including rows of content.
    *   It has logic for refreshing live content and filtering children based on `isLiveSupported` and `isShakaPlayerSupported`.
    *   A filter was added to remove `user_row` if the `activeUser` is of type `KID`.
    *   The two timestamps show no functional difference in the provided code snippets.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\fixedFocus\fixedFocus.scss` (Multiple timestamps between 4/2/2026, 14:02:04 and 4/2/2026, 14:26:32)**
    *   Defines styles for fixed focus elements across different shapes (`keyframe`, `round`, `bigRound`, `poster`, `square`, `landscape-mini`).
    *   A new `.bigRound` focus shape was introduced at `14:02:35` with larger dimensions and specific box-shadow/border colors.
    *   At `14:09:26`, the `.page` context for focus was updated to apply to both `.round` and `.bigRound` shapes.
    *   The `box-shadow` and `border` for `.bigRound` were updated at `14:26:06` and `14:26:27` to use `$base-color-3cat-kid-white !important`, overriding previous values, suggesting a refinement for kid-mode focus styling.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\App.kids.scss` (4/2/2026, 14:18:09)**
    *   Adds general kid-mode styling for focused elements within scrollable containers, applying a light purple box-shadow, border-color, and outline.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\modals\externalContentModal\index.jsx` (Multiple timestamps: 4/2/2026, 15:12:08 & 4/2/2026, 15:15:17 & 4/2/2026, 15:17:01)**
    *   This modal displays information for external content.
    *   At `15:15:17`, a `partner` class was dynamically added to `popupLeft` based on `isPartner`.
    *   At `15:17:01`, the `generateImageData` function call was updated to adjust the image height based on `isPartner` (428px for partners, 544px otherwise), and `isPartner` was added to its `useMemo` dependency.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\modals\externalContentModal\styles.scss` (4/2/2026, 15:15:02)**
    *   Styles for the external content modal.
    *   A `.partner` class was added within `popupLeft` to reduce its height to `428px`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\libs\img.js` (Multiple timestamps between 5/2/2026, 9:38:25 and 5/2/2026, 9:46:57)**
    *   This utility file provides functions for image handling, including `getImgProxyUrl`, `removeItemsFromArray`, `getBestImage`, `getBestImageV2`, `getLogoImage`, `getImageByFormat`, `generateImageData`, and `generateImageDataFromLiveChannelInHome_v2`.
    *   The `NOT_ALLOWED_FORMATS` array was modified at `9:38:51` to include `"square-round"` in `getBestImageV2` function's `notAllowedFomats` list, specifically when `desiredAspect` is `LANDSCAPE`.
    *   At `9:40:33`, `square-round` was added to `NOT_ALLOWED_FORMATS` constant and then again at `9:44:04`, `big-round` was added to `notAllowedFomats` in `getBestImageV2` for landscape aspect. These changes indicate a refinement in how images with specific formats are filtered or prioritized. The `9:46:50` and `9:46:57` changes also involve minor refactoring in `getImgProxyUrl` and `removeItemsFromArray` for conciseness.

### Patterns and Recurring Elements:

*   **Date & Time Consistency:** All entries are from `2/2/2026` for most code files and `3/2/2026` or `5/2/2026` for `config.xml` and `img.js` files, indicating concentrated development efforts over a few days. The second day, `4/2/2026`, shows extensive modifications related to UI components and focus management.
*   **Focus Management:** A significant recurring theme is the meticulous handling of focus within the Smart TV application. Many components (`RoundItem`, `GenericRow`, `SideMenu`, `UsersScreen`, `ExternalContentModal`) use `nav.focusById()` and `registerFocusAction`/`unregisterFocusAction` (from `focusActionRegistry.js`). This highlights a strong emphasis on keyboard/remote navigation, which is critical for TV applications.
*   **Kid Mode / User Profiles:** Several files (`mediaInfo`, `sideMenu`, `usersScreen`, `roundItem`, `fixedFocus`, `App.jsx`, `App.kids.scss`, `page.jsx`) contain logic and styling specifically for a "kid-mode" or "Super3" user profile. This suggests a dedicated effort to create a distinct and safe experience for younger users, often involving different menu options, content filtering, and visual themes.
*   **Platform Specificity:** The `platform/generic.js` and `gateway/js/app.js` files, along with the Tizen `config.xml`, demonstrate the need for platform-specific adaptations for different Smart TV operating systems (WebOS, Tizen, HbbTV) for features like connection management, keyboard input, and application identifiers.
*   **Modular Component Development:** The project structure heavily relies on React components (`components/`, `views/`) and utility functions (`utils/`, `libs/`), promoting reusability and maintainability.
*   **UI/UX Refinements:** Numerous SCSS changes across `mediaTitle`, `portraitItem`, `keyboard`, `fixedFocus`, `genericRow`, `roundRow`, and `externalContentModal` styles point to continuous refinement of the application's visual appearance and user experience, especially around focus states and various content display formats.
*   **Global `window.AppGlobal` Usage:** The `window.AppGlobal` object is extensively used across several files (`generic.js`, `sideMenu`, `App.jsx`, `usersScreen`, `goBackHistory.js`, `page.jsx`) to store and access global application state, actions, and utilities.
*   **Image Handling:** The `libs/img.js` file shows detailed logic for selecting and processing images based on size, aspect ratio, format (e.g., `round`, `big-round`, `logo`), and external status, using an `IMGPROXY_URL` for optimization.
*   **Modal Interactions:** The `App.jsx` and `externalContentModal` components illustrate a pattern of using modals for critical user interactions (exit app, logout, external content warnings), often involving `nav.storedFocus` to return focus to the correct element after the modal closes.
*   **Feature Flags/Debug Information:** The `App.jsx` `BuildInfo` component and `InitDevConsole` function, along with scattered `console.log` statements, indicate the presence of debug features and configuration flags for testing and monitoring the application.