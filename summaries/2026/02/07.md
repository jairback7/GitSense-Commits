# Activity Summary for 7/2/2026

## 4:41:42
The code changes primarily focus on the 3cat_smarttv project, with a mix of feature development, bug fixes, and refactoring across various components, particularly concerning UI elements, navigation, and content display.

### File-Specific Updates:

*   **`c:\Users\Usuario\Documents\Trabajo\3cat_pro\gateway\js\app.js` (2/2/2026, 14:16:27)**
    *   **Description:** This file manages the initial application loading logic, detecting the WebOS SDK version to determine which connection manager to use (WEBOS_MANAGER or PALM_MANAGER) and the appropriate remote URL ('https://smartv-dev.3cat.website/' or 'https://smartv-pro.3cat.website/'). It also checks for internet connectivity. If there's no internet, it displays an alert and subscribes to network status changes to redirect once a connection is available. A keydown listener is implemented for the `VK_BACK` button to handle platform-specific back navigation.
    *   **Key Changes:** Logic for SDK version-based URL and connection manager selection, internet connection check with fallback UI and subscription, and basic back button handling.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\mediaInfo\infoGroup\index.jsx` (2/2/2026, 16:31:34)**
    *   **Description:** This React component is responsible for displaying various media information, such as episode/season counts, publication/expiration dates, live status, and titles. It includes logic for conditional rendering based on item properties (e.g., `is_episode`, `season_count`, `type`). It also references `CCMA-1685` and `CCMA-2104` (commented out).
    *   **Key Changes:** Introduction of `EpisodeCount` and `SeasonsCount` components. `Publication` component is commented out, citing JIRA `CCMA-2104` (removal of "A partir del" functionality). Logic for displaying expiration dates (`showExpiration`). Extensive conditional logic for determining and displaying media titles and descriptions, especially for live content and external items. Filtering of `rating_tags` for empty labels.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\mediaInfo\mediaTitle\styles.scss` (2/2/2026, 16:33:36)**
    *   **Description:** Styling for the `mediaTitle` component.
    *   **Key Changes:** Defines font, size, color, line-clamping, and shadow for `mediaTitle`. Adds specific styles for `.title_program`, `.live`, `.isLive_or_upcoming_event`, `.stream`, `.menu_detail`, and `.external` variations, adjusting font-weight and font-size.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\items\rowItems\portraitItem\styles.scss` (2/2/2026, 16:39:57)**
    *   **Description:** Styling for a portrait item in a row.
    *   **Key Changes:** Defines dimensions, margins, and focus/hover states (using `$base-color-3cat-red`). Adds styling for a `.tag` element (white background, black text, absolute positioning) and `.platform-logo` for external content, including `.externalLogo` and `.externalIcon`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\keyboard\styles.scss` (2/2/2026, 16:56:08 & 2/2/2026, 17:09:25)**
    *   **Description:** Styles for a virtual keyboard component.
    *   **Key Changes:** Defines layout, font sizes, colors, borders, and dimensions for the keyboard container, rows, and individual keys. Includes specific styles for `SMALL`, `MEDIUM`, `LARGE` keys and icons for `BACKSPACE`, `SPACE_BAR`, `RETURN`. The second timestamp adds a `:hover` state to keyboard keys, mirroring the focused style.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\platform\generic.js` (2/2/2026, 17:08:44 & 5/2/2026, 13:32:40)**
    *   **Description:** This file handles generic keyboard navigation and key event handling for Smart TV platforms. It defines global key memory, combinations for special actions (like enabling/disabling ads), and a throttle mechanism for key presses. It includes platform-specific key code handling for WebOS and Tizen.
    *   **Key Changes:**
        *   **2/2/2026, 17:08:44:** Initialization of `window.AppGlobal.KeyMemory` and `window.AppGlobal.keyCombinations`. Implementation of `onKeyDownHandler` with platform-specific `switch` cases for common navigation and player controls. `THROTTLE_MS` is set to 200.
        *   **5/2/2026, 13:32:40:** Comments out `e.preventDefault()` and `e.stopPropagation()` in `onKeyDownHandler` and also comments out `dispatchRewindEvent()` and `dispatchFastForwardEvent()` for WebOS, Tizen, and other platforms. This suggests a potential change in how default key actions or player seek events are handled, possibly to allow native behavior or for further debugging/implementation. The `THROTTLE_MS` is also commented out to remove the throttling mechanism.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\sideMenu\index.jsx` (2/2/2026, 17:36:09 & 2/2/2026, 17:36:22)**
    *   **Description:** This React component implements the application's side menu, handling state for L1 and L2 menu levels, user authentication, and navigation. It includes logic for attaching a search option, refreshing selected menu options, and handling user-specific menus (e.g., kids mode).
    *   **Key Changes:** The second timestamp (2/2/2026, 17:36:22) reintroduces `window.__isEntry = isMenuVisible;` which was likely removed or commented out just before the previous commit, suggesting a quick revert or re-evaluation of its necessity for entry point tracking. Otherwise, the code is identical between these two timestamps, implying a minor, quick change or revert.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\views\onboarding\usersScreen\index.jsx` (Multiple timestamps between 2/2/2026, 17:45:11 and 2/2/2026, 18:14:59)**
    *   **Description:** This React component renders the user selection screen for onboarding, allowing users to select an existing profile, enter kid mode, or add a new user. It handles navigation based on user selection and integrates with authentication context.
    *   **Key Changes:**
        *   **Initial (17:45:11):** `window.__isEntry = location.state?.isEntry || false;` in `UsersScreen` component.
        *   **18:04:11:** Changes `onBackClick` prop of `PageHead` from `window.__isEntry ? window.AppGlobal.Actions.openExitAppModal : undefined` to simply `window.AppGlobal.Actions.openExitAppModal`. This simplifies the back button behavior to always trigger the exit modal.
        *   **18:04:19:** Reverts a change in `useEffect` where `if (isLoading) exitKidMode();` was added. The diff suggests this line was removed, then re-added, implying testing or re-evaluation.
        *   **18:05:33:** Changes `window.__isEntry = location.state?.isEntry || false;` to `window.__isEntry = true;`. This forces the entry flag to true, affecting back button behavior.
        *   **18:06:13:** Comments out `const location = useLocation();` and `window.__isEntry = location.state?.isEntry || false;`, and the previously added `window.__isEntry = true;` is removed.
        *   **18:06:49:** Reverts the previous change, putting back `const location = useLocation();` and `window.__isEntry = true;//location.state?.isEntry || false;`.
        *   **18:09:47:** Reverts `window.__isEntry = true;//location.state?.isEntry || false;` back to `window.__isEntry = location.state?.isEntry || false;`.
        *   **18:10:38:** Introduces `window.__isEntry = true;` inside a `useEffect` hook, but still keeps the commented-out `location` and `window.__isEntry` from location state.
        *   **18:14:59:** Replaces `window.__isEntry = true;` with `window.__foceEntry = true;` in a `useEffect` hook, with a cleanup function to set `window.__foceEntry = false;`. This creates a new global variable for forcing entry, suggesting it's meant for specific scenarios (e.g., debugging or specific navigation flows).

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\utils\goBackHistory.js` (2/2/2026, 18:15:16)**
    *   **Description:** Utility function for handling back navigation within the application, with conditional logic to prevent exiting the app from certain pages or showing player menus.
    *   **Key Changes:** Adds `window.__foceEntry` to the conditions that trigger the `callBackFunc()` (likely `openExitAppModal`), aligning with the change in `usersScreen\index.jsx`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\App.jsx` (Multiple timestamps between 2/2/2026, 18:50:50 and 2/2/2026, 19:14:36)**
    *   **Description:** The main application entry point, setting up React Router, context providers, and global actions. It includes debug panels, handles platform initialization, and manages the exit modal logic.
    *   **Key Changes:**
        *   **18:50:50:** Standard setup of App, contexts, and routes. Debug info for build, user agent, versions, and platform is configurable. `openExitAppModal` is defined, setting `window.isUserModalVisible = true;` and storing `nav.storedFocus`.
        *   **18:51:35:** Comments out lines within `openExitAppModal` related to setting `window.isUserModalVisible = true;`, `nav.storedFocus = nav.getCurrentId();`, and `setExitModal(ModalTypes.EXIT);`. This temporarily disables some of the exit modal's visibility and focus management.
        *   **18:52:39:** Reinstates `window.AppMenu.manageFocused?.();` within `openExitAppModal` and also re-enables `window.isUserModalVisible = true;`, `nav.storedFocus = nav.getCurrentId();`, and `setExitModal(ModalTypes.EXIT);` by uncommenting them. This brings back the full exit modal functionality, including managing menu focus.
        *   **18:54:07:** Comments out `window.AppMenu.manageFocused?.();` from `openExitAppModal` again.
        *   **19:14:36:** The state of `openExitAppModal` (and thus related menu/focus management) remains largely consistent with previous `18:54:07` change, implying that `AppMenu.manageFocused` call within the `openExitAppModal` was removed.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\build_templates\tizen\3cat_pro\config.xml` (3/2/2026, 13:24:24, 5/2/2026, 10:47:12 & 5/2/2026, 11:41:17)**
    *   **Description:** Tizen application configuration file.
    *   **Key Changes:**
        *   **3/2/2026, 13:24:24:** Sets `id="http://tizen.tv3.ccma.cat.qa"` and `application id="PzkKxRdFT6.TV3.qa" package="PzkKxRdFT6qa"`.
        *   **5/2/2026, 10:47:12:** Modifies the widget `id` from `http://tizen.tv3.ccma.cat.qa` to `http://tizen.qa.ccma.cat` and the `application id` from `PzkKxRdFT6.TV3.qa` to `PzkKxRdFT6qa.TV3`. These changes indicate adjustments to application identifiers, likely for QA or deployment purposes.
        *   **5/2/2026, 11:41:17:** No visible code changes compared to the previous timestamp, suggesting a re-save or minor metadata update without content modification.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\items\rowItems\roundItem\index.jsx` (Multiple timestamps between 4/2/2026, 11:36:24 and 4/2/2026, 14:01:29)**
    *   **Description:** React component for rendering a round item within a row, handling image selection, focus actions, and navigation attributes.
    *   **Key Changes:**
        *   **4/2/2026, 11:36:24:** Initial implementation, with `isKidsProfile` parameter influencing image type selection logic. Comments suggest a past `isKidsProfile` block that was commented out.
        *   **4/2/2026, 11:41:47:** Uncomments and re-enables the `isKidsProfile` logic for image selection, looking for 'round' format for kids.
        *   **4/2/2026, 12:08:06:** Changes the image format for `isKidsProfile` from `'round'` to `'big-round'`.
        *   **4/2/2026, 12:21:39:** Removes the `isKidsProfile` specific image selection logic and the `type: 'kids-round'` assignment. The component will now use the standard 'round' or 'logo' logic regardless of `isKidsProfile`. Also updates the `className` conditional to remove `type === 'kids-round'`.
        *   **4/2/2026, 12:56:53 & 4/2/2026, 13:44:19:** Removes `isKidsProfile` from props and the `useMemo` dependency array, and associated conditional logic. The `isKidsProfile` prop is no longer considered in the `RoundItem` itself for image determination.
        *   **4/2/2026, 13:44:59:** Reintroduces a `isBigRound` prop and uses it to determine the image format (`'round'`) and `type` (`'big-round'`).
        *   **4/2/2026, 13:45:13 & 4/2/2026, 13:45:24:** Minor adjustments in `className` and `style.maxWidth` conditionals to correctly use `type === 'big-round'`.
        *   **4/2/2026, 13:48:20:** Changes the image format for `isBigRound` condition from `'round'` to `'big-round'`.
        *   **4/2/2026, 14:01:29:** Updates `data-nav-fixed-focus-shape` attribute to dynamically set 'bigRound' or 'round' based on `isBigRound` prop.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\rowUtils.js` (4/2/2026, 12:01:27 & 4/2/2026, 12:01:36)**
    *   **Description:** Utility function to determine the `rowkind` based on row data.
    *   **Key Changes:** In `getRowkind`, the condition `rowData.format === 'square-mini'` is changed to `rowData.format === 'square_mini'`. This is a minor fix/adjustment to a string comparison for a format type.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\genericRow\index.jsx` (Multiple timestamps between 4/2/2026, 12:02:26 and 4/2/2026, 13:22:28)**
    *   **Description:** A generic React component for rendering various types of content rows (e.g., landscape, portrait, square). It dynamically selects the item component based on `rowType`.
    *   **Key Changes:**
        *   **4/2/2026, 12:02:26:** Initial implementation, defining `getRowElement` and `getShowAllElementsFocusShape`.
        *   **4/2/2026, 12:49:54:** Adds `case 'SQUARE_MINI': return SquareItem;` to `getRowElement` and `case 'SQUARE_MINI': return 'square';` to `getShowAllElementsFocusShape`. Also adds a conditional `isKidsProfile && <div className="roundItemTitle">{item.title}</div>` to the return JSX, which was removed in the next change.
        *   **4/2/2026, 12:54:35:** Removes `isKidsProfile && <div className="roundItemTitle">{item.title}</div>` from the component's JSX.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\views\page\index.jsx` (Multiple timestamps between 4/2/2026, 13:25:55 and 4/2/2026, 13:34:44)**
    *   **Description:** React component for displaying a content page, including dynamic row rendering, live data refreshing, and user authentication/modal handling.
    *   **Key Changes:**
        *   **4/2/2026, 13:25:55:** Logic for `getHomeData`, `getPageData`, `filterChildren` and `refreshLives`. Integration with authentication and settings contexts.
        *   **4/2/2026, 13:26:44:** No visible code changes, likely a re-save or minor whitespace/formatting change.
        *   **4/2/2026, 13:34:44:** No visible code changes, likely another re-save or minor whitespace/formatting change.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\roundRow\index.jsx` (Multiple timestamps between 4/2/2026, 12:27:53 and 4/2/2026, 13:42:39)**
    *   **Description:** React component for rendering a row of round items.
    *   **Key Changes:**
        *   **4/2/2026, 12:27:53:** Uses `isKidsProfile` to conditionally center text alignment for `roundItemWrapper`. Passes `isKidsProfile` to `RoundItem`.
        *   **4/2/2026, 12:30:58:** Removes `styles.kids.scss` import, and the `textAlign` conditional for `isKidsProfile`. The `isKidsProfile` prop is still passed to `RoundItem`.
        *   **4/2/2026, 13:35:58:** Introduces `isBigRound` prop. Uses `isBigRound` for conditional `textAlign` and passes it to `RoundItem`. Adds a conditional `roundItemTitle` for `isBigRound`. Reintroduces `styles.kids.scss` import.
        *   **4/2/2026, 13:38:35:** Changes the `className` of the main `div` to dynamically be `biground_row` or `round_row` based on `isBigRound`.
        *   **4/2/2026, 13:42:39:** Removes `styles.kids.scss` import again.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\roundRow\styles.scss` (4/2/2026, 12:28:04 & 4/2/2026, 13:40:37)**
    *   **Description:** Styling for the `RoundRow` component.
    *   **Key Changes:**
        *   **12:28:04:** Defines basic layout, padding, height, and title styles for `round_row`.
        *   **13:40:37:** Introduces `.biground_row` with a larger height calculation. Refactors common styles for both `.round_row` and `.biground_row` into a combined block. Adds styling for `.roundItemTitle`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\roundRow\styles.kids.scss` (Multiple timestamps between 4/2/2026, 12:30:18 and 4/2/2026, 12:30:18)**
    *   **Description:** Styling specific to kids mode for `RoundRow`.
    *   **Key Changes:**
        *   **12:30:18:** Comments out height adjustment for `.round_row` in `.kid-mode`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\fixedFocus\fixedFocus.kids.scss` (Multiple timestamps between 4/2/2026, 12:26:49 and 4/2/2026, 14:14:40)**
    *   **Description:** Styling for the fixed focus indicator in kids mode.
    *   **Key Changes:**
        *   **12:26:49:** Defines `box-shadow` and `border-color` for `.fixed-focus .inner` using `$base-color-3cat-kid-light-purple`. Includes commented-out styles for `&.round`.
        *   **12:33:20:** Removes `_outline` and `border` properties from `.fixed-focus .inner`.
        *   **12:35:24:** Reintroduces `_outline: 3px solid $base-color-3cat-kid-light-purple; border: 0px; outline: 0px;`.
        *   **12:35:49:** Removes `_outline`, `border`, and `outline` properties again.
        *   **12:37:39:** Adds `outline: 3px solid #be2649;` to `.inner` and uncommented styles for `&.round`, setting `width`, `height`, `box-shadow`, and `border`.
        *   **12:37:59:** Changes `.inner` outline color to `$base-color-3cat-kid-light-purple` and adds `outline: 0px;` to `&.round .inner`.
        *   **12:42:40:** Reverts `&.round .inner` back to defining width, height, shadow, and border.
        *   **12:43:30:** Reintroduces `_outline`, `border`, and `outline` properties, effectively reverting to the 12:26:49 state with `_outline`.
        *   **12:44:18:** Removes `_outline`, `border`, and `outline` properties again from `.inner`. Adds `outline: 0px;` to `&.round .inner`.
        *   **14:02:51:** Reverts `.inner` to a cleaner state with only `box-shadow`, `border-color`, and `outline`.
        *   **14:06:31:** No visible code changes, likely re-save.
        *   **14:14:22:** Adds `&.round, &.big-round { .inner { outline: 0px; } }`.
        *   **14:14:40:** Changes `&.big-round` to `&.bigRound`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\genericRow\styles.scss` (4/2/2026, 12:48:42)**
    *   **Description:** Styles for generic rows, defining padding, heights, and item layout for various row types.
    *   **Key Changes:** Updates dimensions and margins for different `rowType` classes (`LANDSCAPE`, `PORTRAIT`, `SQUARE`, `LANDSCAPE_MINI`, `INLINE`, `FEATURED`, `LAST_DAYS`). Adds `.externalRow` specific height for `LANDSCAPE` and `LIVE_TV`. Defines styles for `.item-show-all` element, including hover/focus effects. Adds `SQUARE_MINI` specific `roundItemTitle` styles.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\items\rowItems\roundItem\styles.scss` (4/2/2026, 13:53:09)**
    *   **Description:** Styling for the `RoundItem` component.
    *   **Key Changes:** Defines default `roundElement` styles including background, dimensions, border-radius, and border. Adds `&.round-image` for items with a round image, removing the border and adjusting dimensions. Introduces `.biground_row .roundElement` for larger round items, with increased width, height, and adjusted `&.round-image` dimensions.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\items\rowItems\roundItem\styles.kids.scss` (Multiple timestamps between 4/2/2026, 12:22:36 and 4/2/2026, 13:54:47)**
    *   **Description:** Styling for `RoundItem` in kids mode.
    *   **Key Changes:**
        *   **12:22:36:** Comments out `background-color` for `.roundElement` in `.kid-mode`.
        *   **12:22:48:** Uncomments `background-color: $base-color-3cat-kid-bright-purple;`.
        *   **12:23:43:** Adds `border: 5px solid $base-color-3cat-kid-bright-purple !important;` to `.roundElement`.
        *   **12:25:30:** Removes the border, keeping only the background color.
        *   **13:54:47:** Reintroduces `border: 5px solid $base-color-3cat-kid-bright-purple !important;`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\fixedFocus\fixedFocus.scss` (Multiple timestamps between 4/2/2026, 14:02:04 and 4/2/2026, 14:26:32)**
    *   **Description:** Styles for the fixed focus indicator, used throughout the application to highlight focused elements.
    *   **Key Changes:**
        *   **14:02:04:** Introduces `&.bigRound` selector, with width, height, border-radius, box-shadow, and border similar to `&.round`, but using `$base-color-3cat-kid-light-purple` for shadow/border.
        *   **14:02:35:** Corrects `bigRound` properties to match desired dimensions and colors (`$base-color-3cat-kid-white`)
        *   **14:03:39 & 14:09:26:** Groups `&.round, &.bigRound` for shared `top` and `left` properties under `.page &.fixed-focus`.
        *   **14:26:06, 14:26:27, 14:26:32:** Changes `box-shadow` and `border` colors for `&.bigRound .inner` to explicitly use `!important` and `white` from `$base-color-3cat-kid-white`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\App.kids.scss` (4/2/2026, 14:18:09)**
    *   **Description:** Styling specific to kids mode for the main application.
    *   **Key Changes:** Defines the focused state for scrollable elements (`.V-SCROLLABLE:not(.fixed) .focused`) in kid mode, applying `box-shadow`, `border-color`, and `outline` using `$base-color-3cat-kid-light-purple`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\modals\externalContentModal\index.jsx` (4/2/2026, 15:12:08 & 4/2/2026, 15:17:01)**
    *   **Description:** React component for displaying a modal for external content.
    *   **Key Changes:**
        *   **15:12:08:** Initial structure for external content modal, displaying image, info, promo text, and buttons.
        *   **15:15:17:** Adds `isPartner ? 'partner' : ''` to the `popupLeft` class and uses `isPartner` to conditionally render the `platformLogoContainer`.
        *   **15:17:01:** Adjusts `generateImageData` call to use `isPartner ? 428 : 544` for image height, making it conditional based on `isPartner`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\modals\externalContentModal\styles.scss` (4/2/2026, 15:15:02)**
    *   **Description:** Styling for the `ExternalContentModal`.
    *   **Key Changes:** Defines layout, sizing, and styling for the modal overlay, popup, left/right sections, promo/platform text rows, and buttons. Adds a `.partner` specific height to `.popupLeft`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\libs\img.js` (Multiple timestamps between 5/2/2026, 9:38:25 and 5/2/2026, 9:46:57)**
    *   **Description:** Utility functions for image handling, including generating image proxy URLs, removing disallowed formats, and selecting the best image based on dimensions and formats.
    *   **Key Changes:**
        *   **9:38:25:** The `NOT_ALLOWED_FORMATS` array has a duplicate entry for `"round"`.
        *   **9:38:51:** Adds `"square-round"` to `notAllowedFomats` array in `getBestImageV2` for both LANDSCAPE and PORTRAIT conditions.
        *   **9:40:12:** No visible code changes compared to the previous timestamp, likely re-save.
        *   **9:40:33:** Removes the duplicate `"round"` entry from `NOT_ALLOWED_FORMATS`.
        *   **9:44:04:** Adds `"big-round"` to `notAllowedFomats` array in `getBestImageV2` for the LANDSCAPE condition.
        *   **9:46:50 & 9:46:57:** No visible code changes compared to the previous timestamp, likely re-saves.

### Patterns and Recurring Elements:

*   **Timestamp Consistency:** All changes occurred on February 2nd, 3rd, 4th, and 5th of 2026, indicating a focused period of development or a single release cycle. Most changes are concentrated on Feb 2nd and Feb 4th.
*   **Kids Mode Integration:** A significant recurring theme is the introduction and refinement of "kids mode" related features and styling. This includes:
    *   Conditional rendering and data fetching for children's content (`child_menu`, `child_home_id`).
    *   Specific styling for `.kid-mode` in various SCSS files (`styles.kids.scss`).
    *   Conditional logic in components like `RoundItem` and `RoundRow` based on `isKidsProfile` or `isBigRound`.
    *   Adjustments to focus behavior and visual indicators (`fixedFocus.kids.scss`, `App.kids.scss`).
*   **UI Component Refinements:** Many changes involve fine-tuning the appearance and behavior of UI components, particularly those displaying content items (`RoundItem`, `GenericRow`, `MediaTitle`, `PortraitItem`) and modals (`ExternalContentModal`).
*   **Navigation and Focus Management:** There are consistent updates related to keyboard navigation, focus management (e.g., `nav.focusById`, `registerFocusAction`, `unregisterFocusAction`), and handling back button actions. The `window.AppMenu` and `window.AppGlobal.Actions` objects are frequently used for global state and actions.
*   **Platform Specificity:** The `platform/generic.js` and `App.jsx` files demonstrate handling for different Smart TV platforms (WebOS, Tizen, HbbTV), including key code mapping and redirect logic. `config.xml` is specifically for Tizen.
*   **Image Handling:** The `libs/img.js` file shows ongoing development in how images are processed, formatted, and delivered (e.g., `IMGPROXY_PRESETS`, `getImgProxyUrl`, `getBestImage`, `removeItemsFromArray`). There's an iterative process of refining the `NOT_ALLOWED_FORMATS` array and image selection logic.
*   **Exit/Logout Flow:** The `App.jsx`, `SideMenu/index.jsx`, `usersScreen/index.jsx`, and `utils/goBackHistory.js` files show a concerted effort to manage the application exit, user logout, and user switching flows, often involving modals and global actions.
*   **Conditional Rendering and Styling:** Extensive use of conditional logic in JSX (`{...condition && {prop: value}}`, `className={\`...\${condition ? 'class' : ''}\`}`) and SCSS nesting (`&.class`) to apply styles and attributes based on various component states or data properties.

## 9:40:55
The code changes primarily focus on the 3cat_smarttv project, with a mix of feature development, bug fixes, and styling adjustments across several components and utilities. There's a notable emphasis on adapting the application for different user types (kids vs. regular) and platform-specific behaviors (WebOS, Tizen, HbbTV).

**File-Specific Updates:**

*   **`c:\Users\Usuario\Documents\Trabajo\3cat_pro\gateway\js\app.js` (2/2/2026, 14:16:27):** This JavaScript file, likely part of a gateway application, was updated to enhance connection management logic for WebOS Smart TVs. It dynamically determines the correct connection manager service (`WEBOS_MANAGER` or `PALM_MANAGER`) based on the `sdkVersion`. It also adjusts the `REMOTE` URL for SDK versions less than 3.5.0, redirecting users to `https://smartv-pro.3cat.website/` if the internet connection is available. If not, it displays an alert and sets up a `keydown` listener to handle the back button (`VK_BACK`) for platform navigation, and subscribes to connection status changes to redirect once the internet is restored.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\mediaInfo\infoGroup\index.jsx` (2/2/2026, 16:31:34):** This React component saw significant updates related to displaying media information.
    *   **Season/Episode Counts:** Logic was added for `EpisodeCount` (respecting `LIVE_REFRESH_INTERVAL` for `CCMA-1685`) and `SeasonsCount` components to conditionally render season/episode counts.
    *   **Publication Date Removal:** A commented-out `Publication` component indicates that the "A partir del" (Available from) functionality was removed (JIRA CCMA-2104).
    *   **Expiration Info:** New logic was introduced in `showExpiration` to display "Disponible fins al/a l'" (Available until) for content expiring within three months.
    *   **Title/Description Logic:** Enhanced logic to determine and display `title` and `description` based on `default_episode`, `h2`, `isLive`, `presenter`, `media_type`, `stream?.channel`, and `collection` (e.g., handling audio lives, thematic content, and external links).
    *   **Tag Filtering:** `item.rating_tags` are now filtered to ensure only tags with non-empty labels are displayed.
    *   **Dot Separated Items:** The `dotSeparatedItems` array was updated to remove the `showPublication` component due to JIRA CCMA-2104.
    *   **External Content:** Added rendering for `MediaTag` for external live content or white tags, and display of `externalPlatformLogo` if applicable.
    *   **Styling/Layout:** Conditional styling based on `fromDetail` and `item.stream?.type`.
    *   **Logo Rendering:** Logic to handle logo image source for live items and general items, including filtering based on `item.collection`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\mediaInfo\mediaTitle\styles.scss` (2/2/2026, 16:33:36):** Minor styling adjustments for `mediaTitle` component, specifically for `.title_program`, `.live`, `.isLive_or_upcoming_event`, `.stream`, `.menu_detail`, and `.external` classes, mostly affecting `font-weight` and `font-size`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\items\rowItems\portraitItem\styles.scss` (2/2/2026, 16:39:57):** Added styling for `.platform-logo` and its children (`.externalLogo`, `.externalIcon`) within a portrait item, likely to support external content integration. It also added a `future-date` class.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\keyboard\styles.scss` (2/2/2026, 16:56:08 & 2/2/2026, 17:09:25):** The keyboard styling file received an update that introduced a `:hover` state for `.keyboard-key` with `box-shadow` and `border` properties, mirroring the `.focused` state styling.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\platform\generic.js` (2/2/2026, 17:08:44 & 5/2/2026, 13:32:40):** This file manages keyboard navigation and platform-specific key handling.
    *   **Key Combination Handling:** `window.AppGlobal.KeyMemory` and `window.AppGlobal.keyCombinations` were expanded to include more key combinations for enabling/disabling ads (e.g., "123", "321", and player button codes).
    *   **Keydown Event Throttling:** A `THROTTLE_MS` was set to 200ms to prevent rapid key presses, but later commented out (`//if (now - lastTs < THROTTLE_MS) return;`).
    *   **Player Keys:** `PLAYER_KEYS` set now includes `VK_PLAY`, `VK_PAUSE`, `VK_PLAY_PAUSE`, `VK_STOP`, `VK_REWIND`, `VK_FAST_FWD` from `KeyCodes`.
    *   **Platform Back/Exit Logic:** The `VK_BACK` case in the `switch` statement was updated to check `window.displayingDidomi` and `window.isUserModalVisible` before calling `goBackHistory` or `window.AppGlobal.Actions.openExitAppModal()`.
    *   **Player Actions:** For WebOS, Tizen, and other non-HbbTV platforms, `VK_PLAY`, `VK_PAUSE`, `VK_PLAY_PAUSE`, `VK_STOP`, `VK_REWIND`, and `VK_FAST_FWD` now trigger `window.AppGlobal.Player.Actions` (play, pause, togglePlayPause). Rewind and FastForward dispatches were commented out in the last update.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\sideMenu\index.jsx` (2/2/2026, 17:36:09 & 2/2/2026, 17:36:22):** This component manages the application's side menu.
    *   **Initial `AppMenu.vars` setup:** Ensured `window.AppMenu.vars` is initialized.
    *   **`window.__isEntry` assignment:** Explicitly set `window.__isEntry = isMenuVisible;` (added and then reverted back to the previous state of setting it based on `location.state?.isEntry`).
    *   **Menu Navigation Refinements:** Minor adjustments to focus logic within `useEffect` when `navigate_2nd_mnu` is 'navigating-2nd-level'.
    *   **Search Option:** The `attachSearchAtTheBeginning` function was introduced to add a 'Search' menu item at the start of the L1 menu.
    *   **User Menu Handling:** Enhanced `openUserMenu` and `onMouseOverUserMenu` to handle authentication states (isAuthenticated, activeUser?.type === UserType.KID) and redirect to `/usersScreen` or `/qrAuthScreen` as appropriate.
    *   **Exit App Logic:** The `fnExitApp` function now explicitly calls `window.AppGlobal.Actions.openExitAppModal()`.
    *   **Menu State Management:** Updates to `exitMenu` and `manageFocused` functions for better menu state and focus management, including resetting `window.AppGlobal.Slider.wasSliderRowRendered` and removing virtualization state on menu navigation.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\views\onboarding\usersScreen\index.jsx` (2/2/2026, 17:45:11 - 2/2/2026, 18:14:59):** This component manages the user selection screen.
    *   **`window.__isEntry` handling:** Initially set `window.__isEntry` from `location.state?.isEntry || false`. Later, this was changed to `window.__isEntry = true;` (2/2/2026, 18:05:33), then commented out the `location` and `window.__isEntry` assignment (2/2/2026, 18:06:13), then reinstated `window.__isEntry = true;` (2/2/2026, 18:06:49) and `location` (2/2/2026, 18:09:47), then `window.__isEntry = true;` was moved inside a `useEffect` and renamed to `window.__foceEntry` with a cleanup (2/2/2026, 18:14:59). These changes indicate a series of attempts to control the "entry point" flag, potentially for back button behavior or initial navigation.
    *   **`PageHead` `onBackClick`:** Changed from conditional `window.__isEntry ? window.AppGlobal.Actions.openExitAppModal : undefined` to unconditionally calling `window.AppGlobal.Actions.openExitAppModal` (2/2/2026, 18:04:11).
    *   **`exitKidMode`:** The `useEffect` for loading users was uncommented to call `exitKidMode()` when `isLoading` is true (2/2/2026, 18:04:19).

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\utils\goBackHistory.js` (2/2/2026, 18:15:16):** This utility function determines back navigation behavior. It now includes `window.__isEntry` and `window.__foceEntry` in its condition to execute `callBackFunc()` (which often opens the exit app modal), signifying a tighter control over exiting the application from specific entry points.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\App.jsx` (2/2/2026, 18:50:50 - 2/2/2026, 19:14:36):** The main application component.
    *   **`openExitAppModal` Refinement:** Initially, `openExitAppModal` explicitly sets `window.isUserModalVisible = true;` and stores the current focus. Subsequent changes (2/2/2026, 18:51:35 and later) commented out these lines and briefly added `window.AppMenu.manageFocused?.()` before reinstating the `window.isUserModalVisible` and `nav.storedFocus` lines while removing `AppMenu.manageFocused()` (2/2/2026, 18:54:07). This suggests a back-and-forth on how modal visibility and focus management should interact with the main app flow and side menu.
    *   **BrowserRouter Future Flags:** `BrowserRouter` now uses `future={{v7_startTransition: true, v7_relativeSplatPath: true}}`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\build_templates\tizen\3cat_pro\config.xml` (3/2/2026, 13:24:24 & 5/2/2026, 10:47:12 & 5/2/2026, 11:41:17):**
    *   **Widget ID and Package ID Change:** The `id` attribute of the `<widget>` element changed from `http://tizen.tv3.ccma.cat.qa` to `http://tizen.qa.ccma.cat`. Similarly, the `id` and `package` attributes of the `<tizen:application>` element changed from `PzkKxRdFT6.TV3.qa` and `PzkKxRdFT6qa` respectively. This indicates a potential shift in the application's unique identifier, possibly related to different deployment environments (e.g., from a 'tv3' specific QA to a more generic QA endpoint). The `devel.api.version` remains "8.0".

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\items\rowItems\roundItem\index.jsx` (4/2/2026, 11:36:24 - 4/2/2026, 14:01:29):** This component renders circular items in rows.
    *   **Kids Profile Logic:** Initial implementation added a conditional image format lookup (`big-round` for kids profile) and dynamic `round-image` class based on `type`. Later, the `isKidsProfile` prop was replaced by `isBigRound` and the image lookup logic simplified to use `round` format for `isBigRound`. The `type` also adapted to `big-round`.
    *   **`data-nav-fixed-focus-shape`:** Updated to dynamically set the focus shape to `bigRound` or `round` based on `isBigRound`.
    *   **`isKidsProfile` removal:** The `isKidsProfile` prop was entirely removed from this component and passed directly to the `RoundItem` component through the `RoundRow` wrapper.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\rowUtils.js` (4/2/2026, 12:01:27 & 4/2/2026, 12:01:36):** A minor fix in `getRowkind` function, changing `rowData.format === 'square-mini'` to `rowData.format === 'square_mini'`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\genericRow\index.jsx` (4/2/2026, 12:02:26 & 4/2/2026, 12:49:54 & 4/2/2026, 12:54:35 & 4/2/2026, 13:22:28):** This generic row component dynamically renders various item types.
    *   **`SQUARE_MINI` Support:** Added `SQUARE_MINI` to `getRowElement` and `getShowAllElementsFocusShape` functions.
    *   **`roundItemTitle` for Kids:** Temporarily added a `roundItemTitle` for `isKidsProfile` at the end of the `return` statement (4/2/2026, 12:49:54) but then removed it again (4/2/2026, 12:54:35), suggesting this styling is now handled by the `RoundRow` or `RoundItem` components directly.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\items\rowItems\roundItem\styles.kids.scss` (4/2/2026, 12:22:36 - 4/2/2026, 14:12:14):** This stylesheet defines kid-mode specific styles for round items.
    *   **Background and Border:** Initially commented out `background-color` (4/2/2026, 12:22:36), then uncommented it to `$base-color-3cat-kid-bright-purple` (4/2/2026, 12:22:48), and added a `border` (4/2/2026, 12:23:43), before removing the `border` again (4/2/2026, 12:25:30) and then restoring the background only (4/2/2026, 14:12:14). This shows a process of refining kid-mode visual distinction.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\fixedFocus\fixedFocus.kids.scss` (4/2/2026, 12:26:49 - 4/2/2026, 14:14:40):** This stylesheet controls the focus styling in kid mode.
    *   **Focus Ring Styling:** Consistent application of `$base-color-3cat-kid-light-purple` for `box-shadow` and `border-color` for the `.fixed-focus .inner` element. There were multiple iterations of commenting/uncommenting `_outline` and `border/outline` properties.
    *   **Round Focus:** Added specific styling for `&.round` focus, and later for `&.round, &.bigRound` to remove outlines, indicating that round elements in kid mode might have different focus visual feedback.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\roundRow\index.jsx` (4/2/2026, 12:27:53 - 4/2/2026, 13:42:39 & 4/2/2026, 12:56:05 & 4/2/2026, 12:57:05):** This component specifically renders rows of round items.
    *   **`isKidsProfile` to `isBigRound`:** The prop `isKidsProfile` was changed to `isBigRound` to explicitly control the size and styling of round items.
    *   **Conditional Styling:** The `roundItemWrapper` now conditionally applies `textAlign: 'center'` based on `isBigRound`.
    *   **`biground_row` class:** Introduced a `biground_row` class based on `isBigRound` to differentiate row styling.
    *   **`roundItemTitle`:** Conditionally renders a title for `isBigRound` items.
    *   **`isKidsProfile` removal:** The `isKidsProfile` prop was removed, indicating a move towards `isBigRound` for specific UI rendering logic.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\roundRow\styles.scss` (4/2/2026, 12:28:04 & 4/2/2026, 13:40:37):** This stylesheet defines styles for `RoundRow`.
    *   **Height adjustments:** Defined separate heights for `.round_row` and `.biground_row` using `calc()`.
    *   **Combined Styling:** Common styles for both `round_row` and `biground_row` were grouped.
    *   **`roundItemTitle` Styling:** Added styling for the `roundItemTitle` class.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\roundRow\styles.kids.scss` (4/2/2026, 12:30:18):** Minimal styling, commenting out a potential height adjustment for kid mode, indicating that this is now handled by the `styles.scss` or `index.jsx` using `isBigRound`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\genericRow\styles.scss` (4/2/2026, 12:48:42):** Updated to include styles for `SQUARE_MINI` row type and its `roundItemTitle`. Adjusted margins and dimensions for `item-show-all` for various row types.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\views\page\index.jsx` (4/2/2026, 13:25:55 - 4/2/2026, 13:34:44):** The main page component for displaying content.
    *   **`isLiveSupportedRef` and `isShakaPlayerSupportedRef`:** `useRef` hooks were added to capture the current `isLiveSupported` and `isShakaPlayerSupported` values from `useCapabilitiesContext`, ensuring they are stable for use in event listeners and data filtering logic.
    *   **Data Filtering for HbbTV/Kids:** The `filterChildren` function was updated to filter out external content for HbbTV platform and user rows for kids profile.
    *   **`evChangeUser` Event Listener:** Corrected the event listener for `evChangeUser` from `document.addEventListener` to `window.addEventListener` within the cleanup function of a `useEffect` hook. (Note: The log shows `document.addEventListener` again at the end of the `useEffect` cleanup which could be a copy-paste error or intended behavior).
    *   **`AppMenu.closeLevel1Menu()`:** Added a call to `AppMenu.closeLevel1Menu()` on component mount, likely to ensure the menu is closed initially.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\modals\externalContentModal\index.jsx` (4/2/2026, 15:12:08 & 4/2/2026, 15:15:17 & 4/2/2026, 15:17:01):**
    *   **`isPartner` handling:** Introduced an `isPartner` boolean based on `item.collection === 'partner'` to conditionally apply the `partner` class to `popupLeft` and adjust image cropping dimensions (`generateImageData`). This allows for different layouts for partner content within the modal.
    *   **Platform Logo:** Conditional rendering of `platformLogoContainer` based on `isPartner`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\modals\externalContentModal\styles.scss` (4/2/2026, 15:15:02):** Added styling for `.popupLeft.partner` to adjust its height within the modal.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\libs\img.js` (5/2/2026, 9:38:25 - 5/2/2026, 9:46:57):** This utility handles image selection and URL generation.
    *   **`NOT_ALLOWED_FORMATS` updates:** The `NOT_ALLOWED_FORMATS` array was modified several times, specifically adding and removing `'square-round'`, and adding `'big-round'` to `notAllowedFomats` in `getBestImageV2` for 'LANDSCAPE' aspect. This fine-tunes which image formats are considered "not allowed" for general image selection, especially in `getBestImageV2` based on aspect ratio.
    *   **Duplicate 'round' removed:** The `NOT_ALLOWED_FORMATS` array had a duplicate 'round' entry, which was removed.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\App.kids.scss` (4/2/2026, 14:18:09):** Added a new style block for `.kid-mode .V-SCROLLABLE:not(.fixed) .focused` to provide a distinct focus styling for kid mode with `$base-color-3cat-kid-light-purple`.

**Patterns and Recurring Elements:**

1.  **Kid Mode Adaptation:** There's a strong recurring pattern of adapting components for "kid mode". This involves:
    *   Conditional rendering (`activeUser?.type === UserType.KID`).
    *   Specific `_kids.scss` stylesheets for visual distinctions (e.g., `RoundItem`, `FixedFocus`, `App`).
    *   Changes to image selection logic to prioritize different formats (e.g., `big-round` for kid items).
    *   Specific content filtering (e.g., `user_row` for kids profile in `Page` component).
    *   The introduction and refinement of `isBigRound` as a prop to manage larger, kid-friendly round items.

2.  **Focus Management and Navigation:**
    *   Extensive use of `nav.focusById`, `registerFocusAction`, `unregisterFocusAction`, `data-block-focus-up/down/left/right`, `data-on-lost-left-action` and `data-group-restore-last-focused='true'` attributes for keyboard/remote navigation.
    *   The `fixedFocus` styling is frequently updated across multiple `.scss` files (`fixedFocus.scss`, `fixedFocus.kids.scss`).
    *   Events like `menu:navigate` and `evChangeUser` trigger focus resets and state cleanups.

3.  **Platform Specificity:**
    *   Checks for `window.AppGlobal.platform` (e.g., `webos`, `tizen`, `hbbtv`) to apply platform-specific logic or filter content.
    *   Distinctions for `WEBOS_MANAGER` vs `PALM_MANAGER` in the gateway `app.js`.
    *   Different key code handling for WebOS and Tizen in `generic.js`.

4.  **Performance and State Management:**
    *   Use of `memo`, `useMemo`, `useRef`, and `useCallback` in React components to optimize rendering and prevent unnecessary re-renders.
    *   Explicit clearing of intervals (`clearInterval`) for refreshing live data.
    *   Resetting virtualization state and fixed focus on navigation or user changes.

5.  **External Content Integration:**
    *   New components like `ExternalContentModal` and logic to handle external content links, platform images, promo texts, and specific styling for "partner" content.
    *   Filtering of external content for HbbTV in the `Page` component.

6.  **Image Handling:**
    *   Utility functions like `getImgProxyUrl`, `removeItemsFromArray`, `getBestImage`, `getBestImageV2`, `getLogoImage`, `getImageByFormat`, `generateImageData` are central to selecting and displaying appropriate images based on size, format, and aspect ratio.
    *   Constant refinement of `NOT_ALLOWED_FORMATS` to ensure correct image selection.

7.  **Date/Time Handling:** Use of `Date` objects and `getTime()` for checking timeframes and content availability (e.g., `showExpiration`, `checkTimeFrame`).

**Significant Timestamps:**

*   **2/2/2026, 14:16:27:** Initial detailed setup for WebOS gateway logic.
*   **2/2/2026, 16:31:34:** Major refactor/enhancement of `infoGroup` component, including expiration logic and title/description adjustments.
*   **2/2/2026, 17:08:44 & 5/2/2026, 13:32:40:** Refinements in `generic.js` for keyboard navigation, player key handling, and back button logic.
*   **2/2/2026, 17:45:11 - 2/2/2026, 18:14:59:** A series of rapid changes to `usersScreen` and `goBackHistory.js` concerning entry point flags (`__isEntry`, `__foceEntry`) and back navigation.
*   **2/2/2026, 18:50:50 - 2/2/2026, 19:14:36:** Multiple iterations on `App.jsx` focusing on exit modal behavior and menu interaction.
*   **3/2/2026, 13:24:24 & 5/2/2026, 10:47:12:** Updates to `config.xml` related to Tizen application IDs, suggesting deployment or QA environment adjustments.
*   **4/2/2026, 11:36:24 - 4/2/2026, 14:26:32:** A continuous stream of updates for round item rendering (`roundItem`, `roundRow`), kid-mode styling (`styles.kids.scss`), and fixed focus (`fixedFocus.scss`, `fixedFocus.kids.scss`), indicating active development on visual presentation and navigation for different content types and user profiles.
*   **4/2/2026, 15:12:08 - 4/2/2026, 15:17:01:** Introduction and refinement of `ExternalContentModal` for handling partner content.
*   **5/2/2026, 9:38:25 - 5/2/2026, 9:46:57:** Frequent adjustments to `img.js` concerning image format selection and "not allowed" formats.

## 10:40:55
The changes primarily focus on a Smart TV application, spanning from its gateway logic to UI components, styling, and platform-specific behaviors. Most of the updates occurred on **February 2, 2026**, with a few scattered on **February 3, 2026** and **February 4-5, 2026**.

**File-specific Updates:**

*   **`c:\Users\Usuario\Documents\Trabajo\3cat_pro\gateway\js\app.js` (2/2/2026, 14:16:27):**
    *   The `init` function was updated to dynamically set `connectionmanager` and `REMOTE` URLs based on the detected `sdkVersion` of the webOS device.
    *   `connectionmanager` is set to `PALM_MANAGER` for `sdkVersion < 300` and `WEBOS_MANAGER` otherwise.
    *   The `REMOTE` URL changes to `https://smartv-pro.3cat.website/` for `sdkVersion < 350` (and `WEBOS_MANAGER`).
    *   Includes logic to check internet connection and redirect, or display an alert and subscribe to network status changes.
    *   Added `VK_BACK` key handling for `webOS.platformBack()`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\mediaInfo\infoGroup\index.jsx` (2/2/2026, 16:31:34):**
    *   Introduced `EpisodeCount` and `SeasonsCount` components for displaying episode/season numbers, considering a `LIVE_REFRESH_INTERVAL` limit for `EpisodeCount` (related to CCMA-1685).
    *   Commented out `Publication` component, with a note "JIRA CCMA-2104: Eliminamos funcionalidad 'A partir del'".
    *   Added logic for `showExpiration` to display an "Available until" date, showing only if the date is within 3 months.
    *   Revised `isLive` and `isUpcomingEvent` checks.
    *   Extensive updates to title and description determination logic, considering `default_episode`, `h2`, `presenter`, `stream`, and `collection` properties, especially for live and audio content.
    *   Refined `shouldShowProgramTitle` and `shouldShowEpisodeTitle` conditions.
    *   Added a `filter` to `item.rating_tags` to ensure labels are not empty.
    *   Modified `dotSeparatedItems` by removing `showPublication` (consistent with CCMA-2104 Jira).
    *   Introduced `isLiveExternal` and `whiteTagText` from `useExternalEmission` hook.
    *   Added conditional rendering for external content platform logos and various `MediaTag` types (live, white, licensed, upcoming event).
    *   Updated the `logoImage` rendering logic for live streams.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\mediaInfo\mediaTitle\styles.scss` (2/2/2026, 16:33:36):**
    *   Updated font sizes and weights for different title types (`.title_program`, `.live`, `.isLive_or_upcoming_event`, `.stream`, `.menu_detail`, `.external`).
    *   `font-size: 56px` is the default, with `38px` for many specific cases and `700` font-weight for `.menu_detail`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\items\rowItems\portraitItem\styles.scss` (2/2/2026, 16:39:57):**
    *   Added styling for a `.platform-logo` within the item, including positioning and styles for `.externalLogo` and `.externalIcon`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\keyboard\styles.scss` (2/2/2026, 16:56:08 & 2/2/2026, 17:09:25):**
    *   Initial creation/update of keyboard styles.
    *   Defined layout for `.keyboard` and `.keyboard-row`.
    *   Detailed styling for `.keyboard-key` including size, background, text, hover/focused states, and specific icons (`icon-BACKSPACE`, `icon-SPACE_BAR`, `icon-RETURN`).
    *   The second timestamp adds a `:hover` state identical to the `.focused` state.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\platform\generic.js` (2/2/2026, 17:08:44 & 5/2/2026, 13:32:40):**
    *   **2/2/2026, 17:08:44:** Initial setup for `KeyMemory` to handle key combinations for actions like enabling/disabling ads. Implemented `onKeyDownHandler` to manage navigation (up, down, left, right), `VK_ENTER`, and `VK_BACK` for different Smart TV platforms (WebOS, Tizen, other). Includes a `THROTTLE_MS` to prevent rapid key presses.
    *   **5/2/2026, 13:32:40:** `e.preventDefault()` and `e.stopPropagation()` were added at the beginning of `onKeyDownHandler`. More significantly, the `THROTTLE_MS` check was commented out `//if (now - lastTs < THROTTLE_MS) return;`, effectively removing key press throttling. Also, `dispatchRewindEvent()` and `dispatchFastForwardEvent()` calls within the platform-specific key handling `switch` statements were commented out.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\sideMenu\index.jsx` (2/2/2026, 17:36:09 & 2/2/2026, 17:36:22):**
    *   Minor change between timestamps: `window.__isEntry = isMenuVisible;` was uncommented in the first `useEffect` hook.
    *   Extensive logic for managing a two-level side menu, including:
        *   Initialization of `window.AppMenu.vars`.
        *   State management for menu visibility (`show_1st_mnu`, `show_2nd_mnu`), navigation (`navigate_2nd_mnu`), and selected options (`selL1`, `selL2`).
        *   `useEffect` hooks to refresh selected options, handle second-level menu navigation, and initialize menu data based on user type (kid or adult).
        *   `attachSearchAtTheBeginning` function to prepend a search option to the menu.
        *   Functions for opening/closing menu levels (`openLevel1Menu`, `closeLevel1Menu`, `openLevel2Menu`, `closeLevel2Menu`, `exitMenu`).
        *   `manageFocused` logic to control focus behavior within the menu.
        *   Navigation functions (`fnDoChangeUser`, `fnExitApp`, `navigateTo`).
        *   `openUserMenu` and `openExploraMenu` for specific menu sections.
        *   `executeL2MenuAction` to handle actions from the second-level menu.
        *   Utilities for generating IDs from menu items (`generateIdFromItem`, `generatePageIdFromItem`, `getSlugFromItem`).

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\views\onboarding\usersScreen\index.jsx` (2/2/2026, 17:45:11 - 18:14:59, multiple changes):**
    *   This file saw several rapid iterations.
    *   **Initial:** `window.__isEntry = location.state?.isEntry || false;`
    *   **18:04:11:** `onBackClick` for `PageHead` changed from conditional `window.__isEntry ? ... : undefined` to always `window.AppGlobal.Actions.openExitAppModal`.
    *   **18:04:19:** `//if (isLoading) exitKidMode();` was uncommented.
    *   **18:05:33:** `window.__isEntry` was explicitly set to `true` instead of being derived from `location.state`.
    *   **18:06:13:** `location` and `window.__isEntry` assignment from `location.state` were commented out.
    *   **18:06:49:** `window.__isEntry = true;` was re-added.
    *   **18:09:47:** `window.__isEntry` assignment was reverted to `location.state?.isEntry || false;`.
    *   **18:10:38:** `window.__isEntry = true;` was re-added within the `useEffect`.
    *   **18:14:59:** The `window.__isEntry` in `useEffect` was replaced by a new `window.__foceEntry` variable, with an additional `useEffect` for its lifecycle. This suggests a struggle with managing entry point state for back navigation.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\utils\goBackHistory.js` (2/2/2026, 18:15:16):**
    *   Added `|| window.__foceEntry` to the condition that triggers `callBackFunc()` (likely `openExitAppModal`). This means if `__foceEntry` is true, the app will exit directly instead of navigating back.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\App.jsx` (2/2/2026, 18:50:50 - 19:14:36, multiple changes):**
    *   These timestamps show several minor adjustments to the `openExitAppModal` function within `AppInner`.
    *   **Initially:** `window.AppMenu?.exitMenu?.(); window.isUserModalVisible = true; nav.storedFocus = nav.getCurrentId(); setExitModal(ModalTypes.EXIT);`
    *   **18:51:35:** `window.isUserModalVisible = true; nav.storedFocus = nav.getCurrentId(); setExitModal(ModalTypes.EXIT);` commented out from `openExitAppModal`.
    *   **18:52:39:** `window.AppMenu.manageFocused?.();` added to `openExitAppModal`. The previously commented out lines for setting modal visibility and focus were still commented.
    *   **18:54:07 & 19:14:36:** The commented out lines `window.isUserModalVisible = true; nav.storedFocus = nav.getCurrentId(); setExitModal(ModalTypes.EXIT);` were uncommented, restoring the original behavior of opening the exit modal.
    *   Also, `BrowserRouter` received `future={{v7_startTransition: true, v7_relativeSplatPath: true}}` props.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\build_templates\tizen\3cat_pro\config.xml` (3/2/2026, 13:24:24 & 5/2/2026, 10:47:12 & 5/2/2026, 11:41:17):**
    *   **3/2/2026, 13:24:24:** Changed `id` and `package` attributes in `<tizen:application>` from `PzkKxRdFT6qa.TV3` to `PzkKxRdFT6.TV3.qa` and `PzkKxRdFT6qa` respectively. The `id` attribute for `<widget>` also changed from `http://tizen.qa.ccma.cat` to `http://tizen.tv3.ccma.cat.qa`.
    *   **5/2/2026, 10:47:12 & 5/2/2026, 11:41:17:** The `id` and `package` attributes in `<tizen:application>` were reverted to `PzkKxRdFT6qa.TV3` and `PzkKxRdFT6qa`. The `<widget>` `id` was also reverted to `http://tizen.qa.ccma.cat`. These indicate a back-and-forth or testing of different application IDs/packages.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\items\rowItems\roundItem\index.jsx` (4/2/2026, 11:36:24 - 14:01:29, multiple changes):**
    *   This file saw many small, interconnected changes related to handling `isKidsProfile` and a new `isBigRound` prop.
    *   **Initial (11:36:24):** `isKidsProfile` was used to determine the image format (`round` for kids, `round` or `logo` for others). `className` included `type === 'kids-round'`.
    *   **11:41:47:** Explicitly checked for `isKidsProfile` when finding image, using `image_format === 'round'`.
    *   **12:08:06:** Changed `image_format` for `isKidsProfile` to `big-round`.
    *   **12:21:39:** Removed `isKidsProfile` logic from `useMemo` that determines image type. The `className` still references `kids-round`.
    *   **12:56:53:** Removed `isKidsProfile` prop and related logic from image determination, simplifying the `useMemo` hook.
    *   **13:44:19:** `isKidsProfile` logic for image format was reintroduced, matching previous state.
    *   **13:44:59:** `isKidsProfile` was replaced by `isBigRound` for image format determination. `type` for `isBigRound` now becomes `big-round`.
    *   **13:45:13 & 13:45:24:** Corrected `className` to use `type === 'big-round'` instead of `type === 'kids-round'` in one instance, ensuring consistent styling based on `isBigRound`. The `img` tag's `className` and `maxWidth` also adjusted.
    *   **13:48:20:** `image_format === 'big-round'` is used when `isBigRound` is true.
    *   **14:01:29:** `data-nav-fixed-focus-shape` attribute was made dynamic based on `isBigRound` (`bigRound` vs `round`).

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\items\rowItems\roundItem\styles.scss` (4/2/2026, 13:53:09):**
    *   Introduced new styles for `.biground_row .roundElement`, adjusting `width`, `height`, and `margin-right` for a larger appearance. `border` was removed from `.round-image`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\items\rowItems\roundItem\styles.kids.scss` (4/2/2026, 12:22:36 - 13:54:47, multiple changes):**
    *   **Initial:** Commented `background-color` for `.roundElement` in kid mode.
    *   **12:22:48, 12:23:43, 12:25:30:** Uncommented `background-color` and `border` for `.roundElement` in kid mode, then removed the explicit `border` again.
    *   **13:54:47:** Re-added `border: 5px solid $base-color-3cat-kid-bright-purple !important;` to `.roundElement` in kid mode. This file mostly focuses on ensuring specific styling for "kid mode" round elements.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\rowUtils.js` (4/2/2026, 12:01:27 & 4/2/2026, 12:01:36):**
    *   Minor fix: `square-mini` was corrected to `square_mini` when determining `ROWkind` for 'ROUND' items.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\genericRow\index.jsx` (4/2/2026, 12:02:26 - 12:54:35, multiple changes):**
    *   **12:02:26:** Updated `getRowElement` to return `SquareItem` for `SQUARE_MINI`. Updated `getShowAllElementsFocusShape` to return `square` for `SQUARE_MINI`. Added `rowDataType === 'row'` to `canDisplaySowAll` condition. Added `isExternalRow` check and a class. Added a `console.warn` if `onFocusAction` is not provided.
    *   **12:49:54:** Added `case 'SQUARE_MINI': return SquareItem;` to `getRowElement` and `getShowAllElementsFocusShape`.
    *   **12:54:35:** Added `isKidsProfile && <div className="roundItemTitle">{item.title}</div>` conditional rendering at the end of the component, which was later removed from `genericRow` (and moved to `roundRow`).

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\genericRow\styles.scss` (4/2/2026, 12:48:42):**
    *   Added styles for `.rowType_SQUARE_MINI` including `roundItemTitle` styles. Made `rowType_HERO` padding-left `190px`. Added height for `.rowType_LANDSCAPE` and `.rowType_LIVE_TV` external rows. Adjusted `item-show-all` sizes for various row types.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\roundRow\index.jsx` (4/2/2026, 12:27:53 - 13:42:39, multiple changes):**
    *   This component also had many iterations related to kid mode and `isBigRound`.
    *   **12:27:53:** `textAlign` of `roundItemWrapper` became conditional on `isKidsProfile`.
    *   **12:30:58:** Removed `styles.kids.scss` import. Removed `isKidsProfile` from `textAlign` condition.
    *   **13:35:58:** `isBigRound` prop introduced, used for `textAlign` and to conditionally render `roundItemTitle`. `styles.kids.scss` import was added back.
    *   **13:38:35:** The main div's `className` was made conditional `isBigRound ? 'biground_row' : 'round_row'`.
    *   **13:42:39:** `styles.kids.scss` import was removed again.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\roundRow\styles.scss` (4/2/2026, 12:28:04 & 4/2/2026, 13:40:37):**
    *   **12:28:04:** Initial styling for `.round_row` including padding, height, and title.
    *   **13:40:37:** Introduced `.biground_row` with a larger `height`. Consolidated common styles for `.round_row, .biground_row`. Moved `roundItemTitle` styles here.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\roundRow\styles.kids.scss` (4/2/2026, 12:30:18):**
    *   Commented out height adjustment for `.round_row` in kid-mode.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\fixedFocus\fixedFocus.kids.scss` (4/2/2026, 12:26:49 - 14:14:40, multiple changes):**
    *   This file iteratively defined and refined the `fixed-focus` styling for kid-mode, primarily around `box-shadow`, `border-color`, and `outline` for `.inner` and `.round` elements.
    *   **12:26:49:** Defined styles for `.fixed-focus .inner` and commented out for `.round`.
    *   **12:33:20:** Removed `_outline` and `border: 0px; outline: 0px;` from `.inner`.
    *   **12:35:24:** Re-added `_outline` and `border: 0px; outline: 0px;`.
    *   **12:35:49:** Removed `_outline` and `border: 0px; outline: 0px;` again.
    *   **12:37:39:** Re-added `outline: 3px solid #be2649;` to `.inner` and styles for `.round`.
    *   **12:37:59:** Changed `.inner` outline to `$base-color-3cat-kid-light-purple` and removed outline from `.round`.
    *   **12:42:40, 12:43:30, 12:44:18:** More back-and-forth on `outline` and `border` properties.
    *   **14:02:51 & 14:06:31:** Simplified to just `box-shadow` and `border-color`.
    *   **14:14:22 & 14:14:40:** Re-added `outline: 3px solid $base-color-3cat-kid-light-purple;` for `.inner` and specified `outline: 0px;` for both `.round` and `.bigRound` types. The last change corrected `big-round` to `bigRound`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\fixedFocus\fixedFocus.scss` (4/2/2026, 14:02:04 - 14:26:32, multiple changes):**
    *   Defined distinct focus styles for `.round` and `.bigRound` elements (`width`, `height`, `border-radius`, `box-shadow`, `border`, `outline`).
    *   **14:02:04:** Introduced `.bigRound` with same size/style as `.round`.
    *   **14:02:35:** Updated `.bigRound` dimensions to `275px` and used `kid-light-purple` for its focus style.
    *   **14:03:39 & 14:09:26:** Updated `.page` styles to include `.bigRound` for positioning.
    *   **14:26:06, 14:26:27, 14:26:32:** Changed `.bigRound`'s `box-shadow` and `border` colors to `$base-color-3cat-kid-white !important;`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\App.kids.scss` (4/2/2026, 14:18:09):**
    *   Added general focus styling for `.V-SCROLLABLE:not(.fixed) .focused` in kid-mode, using `$base-color-3cat-kid-light-purple`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\modals\externalContentModal\index.jsx` (4/2/2026, 15:12:08 & 15:15:17 & 15:17:01):**
    *   **15:12:08:** Initial implementation of `ExternalContentModal` to display details for external content. It renders an `ImageCropper`, `PopupInfoGroup`, and two `GenericButton`s for opening external content or closing the modal. It dynamically adjusts content based on `item.external_type` and `item.collection`.
    *   **15:15:17:** Added a conditional `partner` class to `popupLeft` based on `isPartner`.
    *   **15:17:01:** `generateImageData` now uses `isPartner ? 428 : 544` for image height, making the image cropping size dynamic based on whether the content is a "partner" type.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\modals\externalContentModal\styles.scss` (4/2/2026, 15:15:02):**
    *   Styled the `externalModalOverlay` and `externalPopup`. Defined layout for `popupLeft` and `popupRight`. Includes specific styles for `platformLogoContainer`, `promoTextRow`, `platformTextRow`, and `popupButtons`. Added a `&.partner` style for `popupLeft` to adjust height.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\libs\img.js` (5/2/2026, 9:38:25 - 9:46:57, multiple changes):**
    *   **9:38:25:** `NOT_ALLOWED_FORMATS` array had `round` duplicated. `getBestImageV2` function's `notAllowedFomats` was updated to include more specific image formats (e.g., `square-round`, `big-round`) based on `desiredAspect`.
    *   **9:38:51:** Corrected the `NOT_ALLOWED_FORMATS` array by removing the duplicate `round`.
    *   **9:40:12:** Reverted the `NOT_ALLOWED_FORMATS` array, bringing back the duplicate `round` temporarily.
    *   **9:40:33:** Corrected `NOT_ALLOWED_FORMATS` again, removing duplicate `round` and adding `square-round`.
    *   **9:44:04:** `getBestImageV2` was updated to explicitly push `big-round` to `notAllowedFomats` if `desiredAspect` is `LANDSCAPE`.
    *   **9:46:50 & 9:46:57:** Minor formatting consistency changes, `removeItemsFromArray` also saw an identical self-assignment `return array.filter(...)`. `getBestImageV2` continues to filter `big-round` from `notAllowedFomats` for LANDSCAPE images.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\views\page\index.jsx` (4/2/2026, 13:25:55 & 4/2/2026, 13:26:44 & 4/2/2026, 13:34:44):**
    *   These timestamps show identical content, indicating no functional changes or minor, non-whitespace changes that were immediately reverted.
    *   This component manages page data fetching (`getHomeData`, `getPageData`), including live stream refreshing (`refreshLives`, `checkTimeFrame`). It handles filtering of children based on platform capabilities (`isLiveSupported`, `isShakaPlayerSupported`) and user type (`UserType.KID`). It also sets up event listeners for menu navigation and user changes to reset page state.

**Patterns and Recurring Elements:**

1.  **Kid Mode / Parental Control:** Many changes are specifically related to "kid mode" functionality and styling. This includes:
    *   Conditional logic in `SideMenu` for `child_menu` and `UserType.KID`.
    *   `styles.kids.scss` files being created, updated, and re-evaluated for `RoundItem`, `FixedFocus`, and `App` components, often involving `$base-color-3cat-kid-bright-purple` or `$base-color-3cat-kid-light-purple`.
    *   `UsersScreen` managing user types, including "Super3" (kids profile).
    *   `Page` component filtering `user_row` for kid users and fetching `child_home_id`.
    *   `RoundItem` and `RoundRow` components now have an `isBigRound` prop that seems to replace or work alongside `isKidsProfile` for specific styling or image formats (`big-round`).

2.  **Platform Specificity:** The application consistently handles logic differently for various platforms (WebOS, Tizen, HbbTV) as seen in `app.js`, `generic.js`, and `App.jsx`.
    *   `app.js` adapts connection managers based on `sdkVersion`.
    *   `generic.js` has platform-specific key code handling for player controls.
    *   `App.jsx` uses `isHbbTV` for conditional navigation (`PlatformRedirect`) and context providers.
    *   `Page.jsx` filters content (e.g., external content) for `hbbtv`.

3.  **UI Component Refinement:** Significant effort is going into polishing UI components, especially for list items and modals.
    *   `RoundItem` and `GenericRow` are frequently modified, indicating ongoing development of list displays.
    *   Introduction and refinement of `ExternalContentModal` show new functionality for handling external content.
    *   Styling files (`.scss`) are frequently updated to adjust visual properties like `font-size`, `box-shadow`, `border`, and `background-color`, often in response to functional changes.

4.  **Navigation and State Management:** There are recurring patterns related to application navigation and state.
    *   The `window.__isEntry` and `window.__foceEntry` variables in `UsersScreen` and `goBackHistory.js` suggest challenges in consistently managing the entry point and back navigation behavior within the React Router context.
    *   Extensive use of `useEffect`, `useRef`, and `useState` hooks for managing component lifecycle, data fetching, and UI state.
    *   `window.AppGlobal.Actions.openExitAppModal` and related modal handling are consistently updated across `App.jsx`, `SideMenu.jsx`, and `UsersScreen.jsx`, indicating a central feature for application exit/logout.

5.  **Image Handling:** The `src\libs\img.js` file shows frequent updates to image format filtering (`NOT_ALLOWED_FORMATS`), demonstrating an ongoing effort to optimize or customize image loading and display based on context (e.g., aspect ratio, format preferences). The `round` and `big-round` formats are repeatedly added/removed from `NOT_ALLOWED_FORMATS`.

## 14:44:24
The provided log details code changes across various JavaScript and SCSS files, primarily for a smart TV application, with a consistent focus on UI rendering, navigation, and platform-specific adaptations.

### File-Specific Updates:

*   **`c:\Users\Usuario\Documents\Trabajo\3cat_pro\gateway\js\app.js` (2/2/2026, 14:16:27):**
    *   This file manages the initial application load and internet connection checks for WebOS devices.
    *   It determines the `connectionmanager` service based on `sdkVersion` (using `PALM_MANAGER` for `sdkVersion < 300`, `WEBOS_MANAGER` otherwise).
    *   The `REMOTE` URL is updated to `https://smartv-pro.3cat.website/` for `sdkVersion < 350`.
    *   Upon successful internet connection, the app redirects to the `REMOTE` URL.
    *   If no connection, an alert is shown, and a `keydown` listener is added for the `VK_BACK` key to call `webOS.platformBack()`.
    *   A subscription to the `connectionmanager` status is established to detect changes and redirect if a connection becomes available.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\mediaInfo\infoGroup\index.jsx` (2/2/2026, 16:31:34):**
    *   This component renders media information groups (tags, titles, descriptions, age ratings, duration, season/episode counts).
    *   It includes new components `EpisodeCount` and `SeasonsCount` for displaying chapter and season information, with a `LIVE_REFRESH_INTERVAL` setting for episode limits (`CCMA-1685`).
    *   A `Publication` component (for "A partir del") is commented out, with a note (`JIRA CCMA-2104`) indicating its removal.
    *   Logic for `showExpiration` is enhanced to check for items expiring within three months and format the "Disponible fins a l'/al" date.
    *   `isLive` and `isUpcomingEvent` functions are defined to determine media type.
    *   The `InfoGroup` component now uses `useSettings` to get `LIVE_REFRESH_INTERVAL` and `useExternalEmission` for external content tags.
    *   Logic for determining `title` and `description` is more complex, considering `default_episode`, `h2`, `isLive`, `presenter`, `media_type`, `stream?.channel`, and `collection`.
    *   `shouldShowProgramTitle` and `shouldShowEpisodeTitle` use `useMemo` for conditional rendering.
    *   Rating tags are filtered to ensure `label` is not empty.
    *   The `dotSeparatedItems` array, which previously included `showPublication`, is updated to remove it, aligning with the `CCMA-2104` change.
    *   Added rendering for external platform logos and tags for external live content.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\mediaInfo\mediaTitle\styles.scss` (2/2/2026, 16:33:36):**
    *   Styling for `.mediaTitle` is defined, including font properties, text shadow, and overflow handling.
    *   Specific styles for `.title_program`, `.live`, `.isLive_or_upcoming_event`, `.stream`, and `.menu_detail` classes are introduced or updated, primarily affecting font size and weight. A new `.external` class sets a `font-size` of `56px`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\items\rowItems\portraitItem\styles.scss` (2/2/2026, 16:39:57):**
    *   Styles for `.portraitItem` are defined, including `margin`, `padding`, `width`, `height`, `overflow`, and `position`.
    *   Focus states (`.focused`) within `.relatedContentRow:not(.fixed)` and hover states are styled with `$base-color-3cat-red` for `box-shadow`, `border`, and `outline`.
    *   Styling for `.tag` (white background, black text, specific font, positioning) is detailed.
    *   New styles for `.future-date` (max-width) and `.platform-logo` (positioning, background, alignment, and contained image/icon styles) are added, specifically for external content display.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\keyboard\styles.scss` (2/2/2026, 16:56:08 & 2/2/2026, 17:09:25):**
    *   Defines styles for a virtual keyboard (`.keyboard`, `.keyboard-row`, `.keyboard-key`).
    *   Key styles include `background-color`, `color`, `font-size`, `border-radius`, `width`, `height`, and `border`.
    *   Specific sizes (`.SMALL`, `.MEDIUM`, `.LARGE`) are introduced with distinct widths.
    *   Icons for `BACKSPACE`, `SPACE_BAR`, and `RETURN` are implemented using background images.
    *   The `.focused` state is styled with `box-shadow` and `border` (red tones).
    *   The second commit (17:09:25) specifically adds a `:hover` state for `.keyboard-key` that mimics the `.focused` style, suggesting a change to visual feedback for keyboard interaction.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\platform\generic.js` (2/2/2026, 17:08:44 & 5/2/2026, 13:32:40):**
    *   Initializes global `AppGlobal` object for key memory and combinations.
    *   Defines `IinitKeyboardNavigation_SmartTV` function to set up keyboard navigation and event handlers.
    *   It maps various `keyCode` values to navigation actions (`nav.move.up`, `down`, `left`, `right`, `nav.action()`).
    *   Platform-specific key handling for WebOS and Tizen is included, primarily for media playback controls (Play, Pause, Stop, Rewind, Fast Forward).
    *   The `VK_BACK` key handles application exit or history navigation, with a check for `window.isUserModalVisible`.
    *   The second commit (5/2/2026, 13:32:40) introduces a change to `onKeyDownHandler`: it removes `e.preventDefault()` and `e.stopPropagation()` for player keys. Crucially, the throttling logic (`if (now - lastTs < THROTTLE_MS) return;`) is commented out, implying an immediate response to key presses. Additionally, `dispatchRewindEvent()` and `dispatchFastForwardEvent()` are commented out within the platform-specific `switch` statements, indicating these actions are no longer directly triggered by those key codes in `generic.js`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\sideMenu\index.jsx` (2/2/2026, 17:36:09 & 2/2/2026, 17:36:22):**
    *   Manages the application's side menu, including L1 (main) and L2 (sub) menus.
    *   Uses React hooks (`useState`, `useEffect`, `useRef`, `useMemo`) for state management and memoization.
    *   Integrates `react-router-dom` for navigation.
    *   `AppMenuCreate` initializes global `window.AppMenu.vars` for menu state.
    *   `useEffect` hooks handle menu data generation based on `activeUser` type (kid or standard), refreshing selected options, and attaching/detaching global menu functions.
    *   `attachSearchAtTheBeginning` adds a search menu item.
    *   `refreshSelectedOption` normalizes paths and sets selected menu items.
    *   Functions like `openLevel1Menu`, `closeLevel1Menu`, `openLevel2Menu`, `closeLevel2Menu`, `exitMenu`, `manageFocused` control menu visibility and focus.
    *   `navigateTo` handles routing.
    *   `openUserMenu` and `openExploraMenu` manage opening specific sub-menus.
    *   The second commit (17:36:22) adds `window.__isEntry = isMenuVisible;` to one of the `useEffect` dependencies, suggesting a change related to initial menu entry point tracking.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\views\onboarding\usersScreen\index.jsx` (multiple timestamps on 2/2/2026):**
    *   This component displays a screen for selecting or adding users, including a "Super3" (kids) option.
    *   It uses `useAuthContext` for user management (`getLoggedUsers`, `setActiveUser`, `setKidUser`, `exitKidMode`).
    *   `MAX_USERS_DISPLAYED` is set to 5.
    *   `onSelectUser`, `onSelectKids`, `onSelectAddUser` handle navigation based on user selection.
    *   An `useEffect` hook manages loading state and focuses the first user element.
    *   Multiple commits on this file (17:45:11, 18:04:11, 18:04:19, 18:05:22, 18:05:33, 18:06:13, 18:06:49, 18:09:47, 18:10:38, 18:14:59) show iterative changes regarding the `window.__isEntry` flag and `onBackClick` prop for `PageHead`.
    *   Specifically, `window.__isEntry = location.state?.isEntry || false;` is changed to `window.__isEntry = true;` (18:05:33, 18:10:38) and then commented out in one version (18:06:13). The `onBackClick` for `PageHead` also changes from a conditional `window.__isEntry ? ... : undefined` to always calling `window.AppGlobal.Actions.openExitAppModal`.
    *   The last change (18:14:59) introduces `window.__foceEntry = true;` within an `useEffect` and clears it on unmount, implying a new mechanism for forcing an entry state, potentially related to overriding the `window.__isEntry` logic.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\utils\goBackHistory.js` (2/2/2026, 18:15:16):**
    *   The `goBackHistory` utility function determines whether to call a callback (e.g., exit app) or navigate back in history.
    *   It now checks `window.__isEntry` or the newly introduced `window.__foceEntry` to trigger the `callBackFunc()` (which opens the exit app modal). This indicates that if either of these flags is true, the back action will attempt to exit the app rather than go back in history.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\App.jsx` (multiple timestamps on 2/2/2026):**
    *   This is the main application component, setting up routing, contexts, and global actions.
    *   It defines `InitDevConsole` for a debug console and `InitApp` for platform/keyboard initialization.
    *   `BuildInfo` component displays various build and environment details, including new additions like `VITE_APP_VERSION`, `VITE_BUILD_NUMBER`, `VITE_BUILD_DATE`.
    *   `AppInner` handles modals, logout, and exit logic. `window.AppGlobal.Actions.openExitAppModal` and `openCloseSessionModal` are defined here.
    *   Routing is handled via `react-router-dom` with `PublicRoute` and `PrivateRoute` components.
    *   Multiple commits (18:50:50, 18:50:56, 18:51:35, 18:52:39, 18:54:07, 19:14:36) show iterative modifications to the `openExitAppModal` function. Initially, it sets `window.isUserModalVisible = true` and `setExitModal(ModalTypes.EXIT)`. Subsequent changes (18:51:35, 18:52:39) temporarily comment out these lines or add `window.AppMenu.manageFocused?.()`, suggesting experimentation with how the exit modal interacts with menu state and user visibility. The final versions (18:54:07, 19:14:36) restore the original logic, ensuring `window.isUserModalVisible` is set and the `ExitAppModal` is triggered.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\build_templates\tizen\3cat_pro\config.xml` (3/2/2026, 13:24:24 & 5/2/2026, 10:47:12 & 5/2/2026, 11:41:17):**
    *   This XML configuration file for Tizen applications defines widget metadata, privileges, and settings.
    *   The `id` attribute of the `widget` and `application` tags is modified (e.g., from `http://tizen.tv3.ccma.cat.qa` to `http://tizen.qa.ccma.cat` and `PzkKxRdFT6.TV3.qa` to `PzkKxRdFT6qa.TV3`). This indicates a change in the application's unique identifier, likely for QA or different environment deployments.
    *   The second and third commits on this file show identical content, suggesting a re-save or minor, non-functional update.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\items\rowItems\roundItem\index.jsx` (multiple timestamps on 4/2/2026):**
    *   This React component renders circular items in rows.
    *   It handles image selection based on `item.images` and `image_format` (`round`, `logo`).
    *   It uses `registerFocusAction` and `unregisterFocusAction` for custom focus handling.
    *   Initial changes (11:36:24, 11:41:47) introduce `isKidsProfile` prop to conditionally find `big-round` images for kid profiles.
    *   Subsequent commits (12:08:06, 12:21:39) refine the logic for `isKidsProfile` and `image_format` to retrieve `big-round` for kids, then revert to simpler `round` image finding, and finally remove `isKidsProfile` from the `useMemo` dependency array and the logic for selecting kid-specific images.
    *   Later commits (13:44:19, 13:44:59, 13:45:13, 13:45:24, 13:48:20, 14:01:29) reintroduce a `isBigRound` prop, which influences the image type (`big-round` vs `round`) and the `data-nav-fixed-focus-shape` attribute. This indicates a new design for displaying larger round items.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\items\rowItems\roundItem\styles.scss` (4/2/2026, 13:53:09):**
    *   Initial styles for `.roundElement` include dimensions, margins, border-radius, and text styles.
    *   A new `.round-image` class modifies dimensions and border to accommodate images better.
    *   The new `.biground_row` class specifically overrides styles for `.roundElement` within it, increasing its size and adjusting margins.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\items\rowItems\roundItem\styles.kids.scss` (multiple timestamps on 4/2/2026):**
    *   This file defines specific styles for `kid-mode` versions of `roundItem`.
    *   Initial commits (12:22:36, 12:22:48, 12:23:43, 12:25:30, 13:54:47, 14:12:14) consistently set `background-color` and `border` for `.roundElement` to `$base-color-3cat-kid-bright-purple` when in `kid-mode`, with some back-and-forth on the border application.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\rowUtils.js` (4/2/2026, 12:01:27 & 4/2/2026, 12:01:36):**
    *   The `getRowkind` utility function determines the display format for a row based on `rowData` properties.
    *   The second commit (12:01:36) specifically changes `rowData.format === 'square-mini'` to `rowData.format === 'square_mini'`, a minor textual correction in a conditional check.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\genericRow\index.jsx` (4/2/2026, 12:02:26, 12:49:54, 12:54:35, 13:22:28):**
    *   This component renders various types of content rows.
    *   `getRowElement` maps row types to specific item components (e.g., `LandscapeItem`, `PortraitItem`).
    *   `getShowAllElementsFocusShape` determines the focus shape for "Show All" elements.
    *   The `generateShowAllElements` function creates the "Show All" button.
    *   The commit at 12:49:54 adds `SQUARE_MINI` to the `getRowElement` and `getShowAllElementsFocusShape` switch cases, mapping it to `SquareItem` and `square` focus shape respectively.
    *   The commit at 12:54:35 introduces `isKidsProfile && <div className="roundItemTitle">{item.title}</div>}` at the end of the component, which was then reverted by the next commit at 13:22:28, indicating a temporary addition or test.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\roundRow\index.jsx` (multiple timestamps on 4/2/2026):**
    *   This component renders a row of `RoundItem` components.
    *   Early changes (12:27:53) pass `isKidsProfile` to `RoundItem` and conditionally set `textAlign` for `roundItemWrapper`.
    *   Later commits (12:30:58, 12:56:05, 12:57:05) remove the `styles.kids.scss` import, the `isKidsProfile` prop, and the conditional `textAlign`, simplifying the component for non-kid-specific round items.
    *   A significant change (13:35:58) reintroduces a `isBigRound` prop, which influences the wrapper's `textAlign`, is passed to `RoundItem`, and conditionally renders a `roundItemTitle`.
    *   The commit at 13:38:35 introduces conditional class names for the main row `div` (`biground_row` vs `round_row`) based on `isBigRound`.
    *   The commit at 13:42:39 is identical to 13:38:35, indicating a re-save or minor non-functional change.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\roundRow\styles.scss` (4/2/2026, 12:28:04 & 4/2/2026, 13:40:37):**
    *   Defines styles for `.round_row`.
    *   The second commit (13:40:37) introduces the `.biground_row` class, defining a larger `height` and specific overrides for `.roundElement` within it. It also centralizes common `round_row` and `biground_row` styles. The `.roundItemTitle` style is also moved into this shared block.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\roundRow\styles.kids.scss` (4/2/2026, 12:30:18):**
    *   Contains commented-out `kid-mode` styles for `round_row` height, suggesting this styling was considered or experimented with but not applied.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\fixedFocus\fixedFocus.scss` (multiple timestamps on 4/2/2026):**
    *   Defines styles for a fixed focus indicator (`.fixed-focus`).
    *   Multiple commits (14:02:04, 14:02:35, 14:03:39, 14:09:26, 14:26:06, 14:26:27, 14:26:32) show a progression in defining and refining styles for `.bigRound` focus shape.
    *   The `bigRound` shape is introduced with specific `width`, `height`, `border-radius`, `box-shadow`, and `border`.
    *   Initially, it used `$base-color-3cat-kid-light-purple` for focus, then changed to `$base-color-3cat-red` for generic, and finally changed to `$base-color-3cat-kid-white !important` (14:26:06, 14:26:27, 14:26:32), explicitly setting a white border/shadow for `bigRound` in general, not just `kid-mode`.
    *   The `.page` rule also updates to include `.bigRound` for its positioning.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\fixedFocus\fixedFocus.kids.scss` (multiple timestamps on 4/2/2026):**
    *   These files define `kid-mode` specific overrides for the fixed focus styling.
    *   Changes (12:26:49, 12:33:20, 12:35:24, 12:35:49, 12:37:39, 12:37:59, 12:42:40, 12:43:30, 12:44:18, 14:02:51, 14:06:31, 14:14:22, 14:14:40) show a back-and-forth with various combinations of `box-shadow`, `border-color`, and `outline` for the `.inner` element, typically using `$base-color-3cat-kid-light-purple`.
    *   There's also some experimentation with `&.round` and `&.bigRound` classes, initially trying to define specific sizes/shadows for round items in kid mode, then removing/commenting out those overrides, ultimately settling on `outline: 0px;` for `.round, &.bigRound` elements in kid mode focus (14:14:22, 14:14:40), suggesting that custom focus for these shapes in kid mode is handled differently or removed.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\views\page\index.jsx` (multiple timestamps on 4/2/2026):**
    *   This component renders a generic content page, often the home screen.
    *   It fetches page data (`ApiHome`, `ApiContent_NO_PROMISE`), handles live content refreshing (`refreshLives`, `checkTimeFrame`), and filters children based on platform capabilities (`isLiveSupportedRef`, `isShakaPlayerSupportedRef`) and `activeUser` type (filtering `user_row` for kids).
    *   Includes logic for user modals and external content modals.
    *   The `useEffect` hooks manage navigation events (`menu:navigate`, `evChangeUser`) and data fetching.
    *   The changes (13:25:55, 13:26:44, 13:34:44) show little functional difference, mostly re-saving the same code, possibly during debugging or minor adjustments.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\modals\externalContentModal\index.jsx` (4/2/2026, 15:12:08 & 4/2/2026, 15:15:17 & 4/2/2026, 15:17:01):**
    *   This modal displays information about external content.
    *   The commit at 15:15:17 adds a conditional `partner` class to `popupLeft` based on `isPartner`.
    *   The commit at 15:17:01 modifies the `generateImageData` call to use `isPartner ? 428 : 544` for the image height, making it dynamic based on the `isPartner` prop. It also adds `isPartner` to the `useMemo` dependency array.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\modals\externalContentModal\styles.scss` (4/2/2026, 15:15:02):**
    *   Styling for `.externalModalOverlay` and `.externalPopup`.
    *   A new `&.partner` style is added within `.popupLeft` to reduce its height to `428px`, aligning with the conditional image height change in the `index.jsx` file.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\libs\img.js` (multiple timestamps on 5/2/2026):**
    *   This utility file provides functions for image processing and URL generation using `IMGPROXY_PRESETS`.
    *   `getImgProxyUrl` constructs URLs for image resizing/optimization.
    *   `NOT_ALLOWED_FORMATS` array filters out certain image `image_format` types.
    *   `getBestImage` and `getBestImageV2` select the most suitable image from a list based on dimensions, aspect ratio, and priority.
    *   `getLogoImage` and `getImageByFormat` retrieve specific image formats.
    *   `generateImageData` combines these functions to prepare image data for components.
    *   Multiple commits (9:38:25, 9:38:51, 9:40:12, 9:40:33, 9:44:04, 9:46:50, 9:46:57) show a series of additions and removals of image formats from the `NOT_ALLOWED_FORMATS` array (e.g., `square-round`, `big-round`) and `notAllowedFomats` array in `getBestImageV2`. This indicates an ongoing refinement of which image formats are considered valid or preferred for different contexts. The format `square-round` is consistently added to `NOT_ALLOWED_FORMATS` and `notAllowedFomats` in `getBestImageV2`, and `big-round` is added to `notAllowedFomats` in `getBestImageV2`, indicating these formats are now generally excluded when searching for the "best" image.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\App.kids.scss` (4/2/2026, 14:18:09):**
    *   A new style is introduced for `.V-SCROLLABLE:not(.fixed) .focused` elements within `kid-mode`, applying a specific `box-shadow`, `border-color`, and `outline` using `$base-color-3cat-kid-light-purple`.

### Patterns and Recurring Elements:

1.  **Platform-Specific Development:** Many files show conditional logic (`if (window.AppGlobal.platform === 'webos')`, `if (window.AppGlobal.platform === 'hbbtv')`) or platform-specific configurations (e.g., `config.xml` for Tizen) indicating a multi-platform Smart TV application.
2.  **Kid Mode Integration:** There's a strong recurring theme of "kid mode" or "Super3" features. This is evident in:
    *   `infoGroup\index.jsx`: `LIVE_REFRESH_INTERVAL` for `show_max_episodes`.
    *   `sideMenu\index.jsx`: Menu data generation based on `UserType.KID`, specific text for "change user child".
    *   `usersScreen\index.jsx`: "Super3" option, `setKidUser`, and `exitKidMode` functions.
    *   `page\index.jsx`: `homeId` selection and filtering `user_row` for `UserType.KID`.
    *   `roundItem\index.jsx` and `roundRow\index.jsx`: `isKidsProfile` and `isBigRound` props, conditional styling, and `roundItemTitle` rendering.
    *   Multiple SCSS files (`styles.kids.scss`, `fixedFocus.kids.scss`, `App.kids.scss`) apply distinct color schemes (e.g., `$base-color-3cat-kid-bright-purple`, `$base-color-3cat-kid-light-purple`, `$base-color-3cat-kid-white`) and visual focus indicators when in `kid-mode`.
3.  **Focus Management and Navigation:**
    *   Heavy reliance on a global `nav` object (`nav.focusById`, `nav.move.up`, `nav.action`).
    *   Extensive use of `registerFocusAction` and `unregisterFocusAction` (e.g., in `roundItem`, `genericRow`) to manage custom focus behaviors for individual UI elements.
    *   Attributes like `data-group`, `data-group-restore-last-focused`, `data-nav-fixed-focus-shape`, `data-block-focus-up/down/left/right`, and `data-on-lost-left-action` are prevalent in HTML/JSX, indicating a sophisticated declarative navigation system.
    *   `fixedFocus.scss` and `fixedFocus.kids.scss` specifically style the visual indicator of the currently focused element, with various shapes (`keyframe`, `round`, `bigRound`, `poster`, `square`, `landscape-mini`).
4.  **Image Handling and Optimization:** The `src\libs\img.js` file is frequently updated, indicating ongoing work on how images are fetched, processed (via `IMGPROXY_PRESETS`), and selected based on format, size, and aspect ratio. There's a clear effort to filter out unwanted image formats (`NOT_ALLOWED_FORMATS`).
5.  **Modal and User Interaction:** Components for `ExitAppModal`, `UserModal`, and `ExternalContentModal` show that user prompts and contextual information overlays are an integral part of the application flow.
6.  **React Component Structure:** The project heavily utilizes React functional components, `memo` for performance, and `useEffect`/`useMemo`/`useRef`/`useState` hooks for managing component lifecycle and state.
7.  **Date: All changes occurred on February 2nd to 5th, 2026**, suggesting a concentrated period of development and refinement. Many files, especially SCSS files, show a rapid series of small, iterative changes within a short timeframe, often adjusting specific styling properties or re-adding/removing temporary code snippets.

Overall, the changes indicate a mature smart TV application undergoing continuous development, with a strong emphasis on user experience (navigation, modals, kid mode), performance (image optimization, memoization), and adaptability across different TV platforms.