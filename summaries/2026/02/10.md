# Activity Summary for 10/2/2026

## 9:14:12
The code changes primarily occurred between February 2nd and February 5th, 2026, focusing on two main areas: Smart TV application development and image handling utilities.

### File-Specific Updates:

*   **`c:\Users\Usuario\Documents\Trabajo\3cat_pro\gateway\js\app.js` (2/2/2026, 14:16:27)**
    *   This file contains a JavaScript `init()` function for a WebOS gateway application.
    *   It determines the `connectionmanager` service (WebOS vs. Palm) and `REMOTE` URL based on the `sdkVersion`.
    *   It checks for internet connection availability and redirects to `REMOTE + query` if connected.
    *   If no internet, it displays an alert and sets up a keydown listener for the `VK_BACK` button to exit the platform.
    *   It also subscribes to connection status changes to redirect once connectivity is restored.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\mediaInfo\infoGroup\index.jsx` (2/2/2026, 16:31:34)**
    *   This React component (`InfoGroup`) is responsible for displaying media information such as episode/season counts, publication dates, and live/upcoming event details.
    *   It includes logic for formatting dates (`formatDateToCatalan`, `formatFullDateWithLabelUTC`, `formatCatalanDayMonthWithLabelUTC`).
    *   A commented-out section (`// JIRA CCMA-2104`) indicates the removal of "A partir del" publication date functionality.
    *   It conditionally renders `SeasonsCount` and `EpisodeCount` based on `item` properties and `LIVE_REFRESH_INTERVAL` from settings.
    *   It also handles the display of expiration information (`showExpiration`) and determines image types (`logoImage`, `channelLogo`).
    *   Extensive conditional logic is used to determine the `title` and `description` to display, considering default episodes, live streams, audio, and linked collections.
    *   Logic for `rating_tags` is added to filter out empty labels.
    *   New props like `showAgeRating` were added.
    *   `useExternalEmission` hook is used for external content indicators (`isLiveExternal`, `whiteTagText`).
    *   Rendering includes `MediaTag`, `MediaTitle`, `AgeRateImg`, `Duration`, `MediaSmallDescription`, and `MediaFeatures`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\mediaInfo\mediaTitle\styles.scss` (2/2/2026, 16:33:36)**
    *   Styling for `.mediaTitle` was adjusted, specifically updating font-size and font-weight for different title types (`.title_program`, `.live`, `.isLive_or_upcoming_event`, `.stream`, `.menu_detail`, `.external`).

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\items\rowItems\portraitItem\styles.scss` (2/2/2026, 16:39:57)**
    *   Added styles for `.platform-logo` within `.portraitItem` to display external platform logos, including `.externalLogo` and `.externalIcon`.
    *   The `:hover` and `.focused` states were updated with box-shadow, border-color, and outline properties, specifically using `$base-color-3cat-red`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\keyboard\styles.scss` (2/2/2026, 16:56:08 & 2/2/2026, 17:09:25)**
    *   Initial styling for a virtual keyboard (`.keyboard`, `.keyboard-row`, `.keyboard-key`) was added, defining layout, colors, font sizes, and button dimensions.
    *   Specific styles for different key sizes (`.SMALL`, `.MEDIUM`, `.LARGE`) and icons (`.icon-BACKSPACE`, `.icon-SPACE_BAR`, `.icon-RETURN`) were included.
    *   The `.focused` state styling was defined with a box-shadow and a red border (`#dc2c52`).
    *   A `:hover` state was added later, mirroring the `.focused` state with a red box-shadow and border.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\platform\generic.js` (2/2/2026, 17:08:44 & 5/2/2026, 13:32:40)**
    *   This file manages generic keyboard navigation for Smart TV platforms.
    *   It defines `window.AppGlobal.KeyMemory` for tracking key combinations (e.g., "979899" for enabling ads).
    *   `IinitKeyboardNavigation_SmartTV()` sets up a `onKeyDownHandler` that prevents default behavior, throttles key events, and dispatches custom navigation events.
    *   It handles common key codes (up, down, left, right, enter, back) and platform-specific codes for WebOS and Tizen (play, pause, stop, rewind, fast forward).
    *   The back key (`VK_BACK`, `10009`, `461`, `88`, `VK_ESCAPE`, `VK_BACK_SPACE`) logic was updated to check `window.isUserModalVisible` before calling `goBackHistory` or `openExitAppModal`.
    *   **Significant change (5/2/2026, 13:32:40):** Comments for `e.preventDefault(); e.stopPropagation();` were added at the beginning of `onKeyDownHandler` and `THROTTLE_MS` was commented out (line `if (now - lastTs < THROTTLE_MS) return;`). Also, `dispatchRewindEvent()` and `dispatchFastForwardEvent()` calls were commented out within the platform-specific `switch` statements, indicating a temporary disabling or refactoring of these functionalities.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\sideMenu\index.jsx` (2/2/2026, 17:36:09 & 2/2/2026, 17:36:22)**
    *   This React component (`SideMenu`) manages the application's side navigation.
    *   It dynamically generates L1 and L2 menu data based on user type (kid/adult) and settings.
    *   Includes logic for refreshing selected menu options, handling user-related actions (change user, exit app), and navigating to different routes.
    *   A `window.__isEntry` assignment was added and then slightly adjusted (from `window.__isEntry = isMenuVisible;` to `window.__isEntry = isMenuVisible;`). This suggests a change in how the entry point or menu visibility is tracked.
    *   The `manageFocused` function logic was updated to ensure correct focusing behavior when entering/leaving the menu, especially for 'explora' and 'userside' options.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\views\onboarding\usersScreen\index.jsx` (multiple timestamps between 2/2/2026, 17:45:11 and 2/2/2026, 18:14:59)**
    *   This React component (`UsersScreen`) allows users to select or add profiles.
    *   Initial changes related to `window.__isEntry`: it was first set from `location.state?.isEntry || false`, then changed to `true` (2/2/2026, 18:05:33 & 2/2/2026, 18:06:49), and then commented out while still setting `window.__foceEntry = true;` with a cleanup in `useEffect` (2/2/2026, 18:14:59). This suggests an evolving approach to managing the "entry" state of the application for navigation purposes.
    *   The `onBackClick` prop for `PageHead` was consistently set to `window.AppGlobal.Actions.openExitAppModal`, replacing conditional logic.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\utils\goBackHistory.js` (2/2/2026, 18:15:16)**
    *   The `goBackHistory` utility function was updated to include `window.__foceEntry` in its condition for calling `callBackFunc()` (which opens the exit app modal).

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\App.jsx` (multiple timestamps between 2/2/2026, 18:50:50 and 2/2/2026, 19:14:36)**
    *   The main `App` component defines routing and context providers.
    *   Multiple minor modifications to the `openExitAppModal` function, including:
        *   Initially, `window.AppMenu?.exitMenu?.();` was called, followed by setting `window.isUserModalVisible = true; nav.storedFocus = nav.getCurrentId(); setExitModal(ModalTypes.EXIT);`.
        *   Later, the lines setting `window.isUserModalVisible`, `nav.storedFocus`, and `setExitModal` were commented out in one version (2/2/2026, 18:51:35), suggesting an attempt to remove or temporarily disable the exit modal.
        *   This was quickly reverted, re-enabling the lines (2/2/2026, 18:54:07), and then later `window.AppMenu.manageFocused?.();` was added (2/2/2026, 18:52:39), which was subsequently removed (2/2/2026, 19:14:36). This indicates active iteration on the exit application flow and focus management.
    *   The `BrowserRouter` was updated to include `future={{v7_startTransition: true, v7_relativeSplatPath: true}}` props, suggesting an upgrade or preparation for `react-router-dom` v7.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\build_templates\tizen\3cat_pro\config.xml` (3/2/2026, 13:24:24, 5/2/2026, 10:47:12, 5/2/2026, 11:41:17)**
    *   The `id` attribute of the `<widget>` element changed from `"http://tizen.tv3.ccma.cat.qa"` to `"http://tizen.qa.ccma.cat"`.
    *   The `id` attribute of the `<tizen:application>` element changed from `"PzkKxRdFT6.TV3.qa"` to `"PzkKxRdFT6qa.TV3"`. These changes indicate adjustments to application identifiers, possibly related to different deployment environments (e.g., QA).

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\items\rowItems\roundItem\index.jsx` (multiple timestamps between 4/2/2026, 11:36:24 and 4/2/2026, 14:01:29)**
    *   This React component (`RoundItem`) renders circular items in rows.
    *   Initial logic for `image` and `type` determination was based on `item.images` and `isKidsProfile`.
    *   **Significant changes regarding `isKidsProfile` and `isBigRound`:**
        *   Initially, `isKidsProfile` was used to find `round` image format and set `type: 'kids-round'`. (4/2/2026, 11:41:47)
        *   It then looked for `big-round` for `isKidsProfile` (4/2/2026, 12:08:06).
        *   Later, the `isKidsProfile` logic was removed from the `useMemo` that determines `image` and `type`, implying that the `type` for kids might be handled differently or simplified (4/2/2026, 12:21:39).
        *   Subsequently, a new prop `isBigRound` was introduced, which impacts the `image` and `type` logic, looking for 'round' images and setting `type: 'big-round'` when true (4/2/2026, 13:44:59).
        *   The `className` was updated to use `(type === 'round' || type === 'big-round') ? 'round-image' : ''` (4/2/2026, 13:45:24).
        *   The `data-nav-fixed-focus-shape` attribute was made dynamic based on `isBigRound` (4/2/2026, 14:01:29).

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\items\rowItems\roundItem\styles.scss` (4/2/2026, 13:53:09)**
    *   New styles were added for `.biground_row .roundElement` to adjust width, height, and margin for larger round items. The `.round-image` class styling was also updated.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\items\rowItems\roundItem\styles.kids.scss` (multiple timestamps between 4/2/2026, 12:22:36 and 4/2/2026, 13:54:47)**
    *   This file was frequently updated, primarily to define `.roundElement` styles specific to `kid-mode`.
    *   It consistently sets `background-color` to `$base-color-3cat-kid-bright-purple` and often includes a matching `border` style. Some intermediate changes included adding/removing `border` and `outline` properties, indicating fine-tuning of the focused/hovered appearance for kid mode.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\fixedFocus\fixedFocus.kids.scss` (multiple timestamps between 4/2/2026, 12:26:49 and 4/2/2026, 14:14:40)**
    *   This stylesheet defines the `fixed-focus` styling for kid mode.
    *   It consistently sets `box-shadow` and `border-color` to `$base-color-3cat-kid-light-purple` for the `.inner` element.
    *   There were several iterations on the `outline` property for `.inner` (sometimes `0px`, sometimes `3px solid $base-color-3cat-kid-light-purple`).
    *   Styles for `&.round` focus shape were added, removed, and re-added.
    *   **Significant change (4/2/2026, 14:14:40):** The `&.round, &.bigRound` rule was added, setting `outline: 0px;` for these specific shapes in kid mode, indicating that round focus elements in kid mode should not have an explicit outline.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\rowUtils.js` (4/2/2026, 12:01:27 & 4/2/2026, 12:01:36)**
    *   The `getRowkind` function, which determines the type of row, was updated.
    *   Specifically, the condition for a `ROUND` row was changed from `rowData.format === 'round' || rowData.format === 'square-mini'` to `rowData.format === 'round' || rowData.format === 'square_mini'`. This is a minor correction from `square-mini` to `square_mini` (underscore instead of hyphen).

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\genericRow\index.jsx` (multiple timestamps between 4/2/2026, 12:02:26 and 4/2/2026, 13:22:28)**
    *   This React component (`GenericRow`) renders various types of content rows.
    *   The `getRowElement` function was updated to map `SQUARE_MINI` to `SquareItem`.
    *   The `getShowAllElementsFocusShape` function was updated to map `SQUARE_MINI` to `'square'`.
    *   A line `// {isKidsProfile && <div className="roundItemTitle">{item.title}</div>}` was temporarily added inside the main return block and then removed, suggesting an experiment with displaying `item.title` directly on the row for kid profiles (4/2/2026, 12:49:54 to 4/2/2026, 12:54:35).

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\roundRow\index.jsx` (multiple timestamps between 4/2/2026, 12:27:53 and 4/2/2026, 13:42:39)**
    *   This React component (`RoundRow`) renders a row of `RoundItem`s.
    *   Initially included `styles.kids.scss` import, then removed it (4/2/2026, 12:30:58), and re-added it (4/2/2026, 13:35:58).
    *   **Key changes related to `isKidsProfile` and `isBigRound`:**
        *   The `textAlign` style for `roundItemWrapper` was initially conditional on `isKidsProfile`, then removed, and later made conditional on `isBigRound`.
        *   The `RoundItem` component started receiving an `isKidsProfile` prop, which was then replaced by `isBigRound`.
        *   A conditional `roundItemTitle` was added to display the item title below the `RoundItem` when `isBigRound` is true (4/2/2026, 13:35:58).
        *   The main `div`'s `className` became dynamic, using `biground_row` or `round_row` based on `isBigRound` (4/2/2026, 13:38:35).

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\roundRow\styles.scss` (4/2/2026, 12:28:04 & 4/2/2026, 13:40:37)**
    *   Initial styling defined fixed `height` for `.round_row`.
    *   **Significant update (4/2/2026, 13:40:37):** Introduced `.biground_row` with a larger `height`, and refactored common styles for both `.round_row` and `.biground_row`. Also added styles for `.roundItemTitle` for typography and alignment.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\views\page\index.jsx` (multiple timestamps between 4/2/2026, 13:25:55 and 4/2/2026, 13:34:44)**
    *   This React component (`Page`) handles displaying content pages, including home screens and other data-driven views.
    *   The `filterChildren` function, responsible for filtering rows, added a condition to exclude `user_row` for `UserType.KID`. This is a key change for kid profiles.
    *   The component also updated its `useEffect` hooks for handling menu navigation (`menu:navigate`) and user changes (`evChangeUser`), specifically resetting virtualization, fixed focus, and page data.
    *   The `getHomeData` and `getPageData` functions fetch content, and `getHomeData` now uses `settingsData?.child_home_id` or `settingsData?.home_id` based on `activeUser?.type`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\modals\externalContentModal\index.jsx` (4/2/2026, 15:12:08 & 4/2/2026, 15:17:01)**
    *   This React component (`ExternalContentModal`) displays a modal for external content.
    *   The `popupLeft` class now dynamically includes `partner` if `isPartner` is true, affecting its layout.
    *   The `generateImageData` call now passes `isPartner` to determine image dimensions, specifically adjusting height for partner content (4/2/2026, 15:17:01).

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\modals\externalContentModal\styles.scss` (4/2/2026, 15:15:02)**
    *   Added styles for `.popupLeft.partner` to adjust its height within the modal.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\libs\img.js` (multiple timestamps between 5/2/2026, 9:38:25 and 5/2/2026, 9:46:57)**
    *   This utility file handles image processing and URL generation.
    *   The `NOT_ALLOWED_FORMATS` array for `getBestImage` and `getBestImageV2` was updated.
    *   Specifically, `square-round` was added to `NOT_ALLOWED_FORMATS` for `getBestImageV2` at one point (5/2/2026, 9:38:51) and then removed from the general `NOT_ALLOWED_FORMATS` but kept in the `getBestImageV2` local `notAllowedFomats` array.
    *   `big-round` was also added to the `notAllowedFomats` array within `getBestImageV2` for landscape aspect ratio (5/2/2026, 9:44:04).
    *   The `NOT_ALLOWED_FORMATS` array for `getBestImage` was updated, removing a duplicate 'round' entry and keeping 'square-round' as disallowed globally for `getBestImage` at one point. This was then reverted back (5/2/2026, 9:46:50).

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\App.kids.scss` (4/2/2026, 14:18:09)**
    *   New styling added for `.V-SCROLLABLE:not(.fixed) .focused` in `kid-mode`, setting box-shadow, border-color, and outline to `$base-color-3cat-kid-light-purple`.

### Patterns and Recurring Elements:

1.  **Kid Mode / User Type Differentiation:** A significant recurring theme is the introduction and refinement of "kid-mode" or `UserType.KID` specific logic and styling. This is evident in:
    *   `SideMenu`: dynamic menu generation based on user type.
    *   `UsersScreen`: logic for selecting "Super3" (kids profile).
    *   `Page`: filtering rows and selecting home data based on `activeUser?.type`.
    *   `RoundItem`: conditional rendering and styling based on `isKidsProfile` and `isBigRound`.
    *   SCSS files (`styles.kids.scss`, `fixedFocus.kids.scss`, `App.kids.scss`): extensive use of the `.kid-mode` class to apply distinct visual styles (colors, box-shadows, borders) for focused elements, round items, and general scrollables.
2.  **Focus Management and Navigation:**
    *   Heavy reliance on `nav.focusById()` and `registerFocusAction`/`unregisterFocusAction` for managing element focus in Smart TV interfaces.
    *   Use of `data-block-focus-up`, `data-block-focus-down`, `data-block-focus-left`, `data-block-focus-right` attributes for explicit navigation control.
    *   Frequent updates to `fixed-focus` styling in SCSS files across various components (`RoundItem`, `GenericRow`, `fixedFocus.scss`, `fixedFocus.kids.scss`).
3.  **Exit Application Flow:** Multiple iterations in `App.jsx` and `platform\generic.js` to control how the application exits, especially concerning modals (`ExitAppModal`) and user states (kid vs. adult, logged in vs. guest). The `window.__isEntry` and `window.__foceEntry` flags suggest a complex state management for initial load and back navigation behavior.
4.  **Image Handling Refinement:** `src\libs\img.js` shows continuous adjustments to `NOT_ALLOWED_FORMATS` and the logic within `getBestImage` and `getBestImageV2`. This indicates ongoing work to optimize image selection and display based on aspect ratios, formats, and priorities, with special considerations for various item types and profiles (e.g., `big-round` images).
5.  **Platform-Specific Adaptations:** `platform\generic.js` demonstrates explicit handling for WebOS and Tizen platforms for keyboard input, and `App.jsx` uses `isHbbTV` for conditional rendering and routing. `gateway\js\app.js` is also platform-aware (WebOS vs. Palm).
6.  **React Component Structure:** The use of `memo`, `useMemo`, `useEffect`, and `useRef` is consistent across React components (`infoGroup\index.jsx`, `sideMenu\index.jsx`, `usersScreen\index.jsx`, `roundItem\index.jsx`, `genericRow\index.jsx`, `page\index.jsx`, `App.jsx`, `externalContentModal\index.jsx`), indicating a functional component-based architecture with performance optimizations.
7.  **SCSS for Styling:** A consistent pattern of using SCSS for styling, with separate files for "kids" specific styles (`.kids.scss`), reflecting a modular and themed approach to UI design.
8.  **API Interaction:** Components like `Page` actively interact with `ApiHome`, `ApiGetNowPlayingSelector`, `ApiGetNowPlaying`, and `ApiContent_NO_PROMISE`, managing loading states, errors, and authentication.

## 10:14:21
The log details a series of code changes, primarily focusing on a Smart TV application (likely 3Cat) with updates spanning from February 2nd to February 5th, 2026. The changes indicate ongoing development and refinement of UI components, navigation, platform-specific adaptations, and image handling, with a noticeable emphasis on "kid-mode" functionalities.

**File-Specific Updates:**

*   **`c:\Users\Usuario\Documents\Trabajo\3cat_pro\gateway\js\app.js` (2/2/2026, 14:16:27):**
    *   This file, part of a "gateway" project, initializes the application based on the WebOS SDK version.
    *   It dynamically sets the `connectionmanager` service URL (either `WEBOS_MANAGER` or `PALM_MANAGER`) and the `REMOTE` website URL (`https://smartv-dev.3cat.website/` or `https://smartv-pro.3cat.website/`) based on `sdkVersion`.
    *   It checks for internet connectivity. If available, it redirects to the `REMOTE` URL. If not, it displays an alert and subscribes to network status changes, redirecting upon connection.
    *   Includes a `keydown` handler for the `VK_BACK` key to trigger `webOS.platformBack()`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\mediaInfo\infoGroup\index.jsx` (2/2/2026, 16:31:34):**
    *   This React component is responsible for displaying detailed media information (title, description, duration, age rating, tags, etc.).
    *   Numerous `useMemo` hooks are used for performance optimization in calculating `logoImage`, `channelLogo`, `shouldShowProgramTitle`, and `shouldShowEpisodeTitle`.
    *   It includes logic for displaying `EpisodeCount` and `SeasonsCount` with conditions for `episode_count` and `LIVE_REFRESH_INTERVAL`.
    *   There's a commented-out section for "Publication" (`JIRA CCMA-2104: Eliminamos funcionalidad 'A partir del'`), indicating the removal of "Available from" date functionality.
    *   Adds a `showExpiration` function to display content availability end dates, with specific formatting logic.
    *   Introduces logic for handling external content (`is_external`, `external_content_data`) and displaying corresponding platform logos or tags.
    *   The JSX rendering includes conditional displays for `MediaTag`, `MediaTitle`, `AgeRateImg`, `Duration`, `MediaSmallDescription`, and `MediaFeatures` based on item properties and `props`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\mediaInfo\mediaTitle\styles.scss` (2/2/2026, 16:33:36):**
    *   Styles for media titles, defining color, font, size, line-height, text-shadow, and `max-width`.
    *   Specific styles are applied using BEM-like class modifiers (e.g., `&.title_program`, `&.live`, `&.menu_detail`, `&.external`) to adjust font-weight and font-size based on context.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\items\rowItems\portraitItem\styles.scss` (2/2/2026, 16:39:57):**
    *   Styling for portrait-oriented items within rows, including size, margins, and overflow.
    *   Defines focus states (`&.focused`) with a red box-shadow and outline, and hover effects (`&:hover`).
    *   Includes styling for a `tag` (white background, black text, uppercase) and a `platform-logo` for external content, positioned at the bottom-left of the item.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\keyboard\styles.scss` (2/2/2026, 16:56:08 & 2/2/2026, 17:09:25):**
    *   Defines styles for a virtual keyboard, including layout (`flex-direction: column`, `justify-content: center`).
    *   Keys (`.keyboard-key`) have specific dimensions, borders, background, font-size, and border-radius.
    *   Modifier classes exist for `SMALL`, `MEDIUM`, `LARGE` keys and icons for `BACKSPACE`, `SPACE_BAR`, `RETURN`.
    *   The `focused` state for keys is styled with an inset box-shadow and a red border.
    *   The second commit adds a `hover` state with identical styling to the `focused` state, suggesting an intention for consistent visual feedback.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\platform\generic.js` (2/2/2026, 17:08:44 & 5/2/2026, 13:32:40):**
    *   Manages generic keyboard navigation for Smart TV platforms.
    *   Defines key codes (`VK_LEFT`, `VK_UP`, etc.) and a `KeyMemory` object to store recent key presses and execute matched combinations (e.g., "979899" for enabling ads).
    *   `IinitKeyboardNavigation_SmartTV` function sets up global keyboard handlers.
    *   A `THROTTLE_MS` (200ms) is used to prevent rapid key presses.
    *   The `onKeyDownHandler` processes key presses, with specific handling for navigation keys, `ENTER`, `BACK`, `ESCAPE`, and numeric keys (0-9).
    *   Platform-specific key handling for `webos` and `tizen` is included, particularly for media playback controls (Play, Pause, Stop, Rewind, Fast Forward).
    *   **Significant change (5/2/2026, 13:32:40):** The `e.preventDefault()` and `e.stopPropagation()` calls were removed from the beginning of `onKeyDownHandler`, which could affect default browser behavior for key presses. Also, the `dispatchRewindEvent()` and `dispatchFastForwardEvent()` calls were commented out, potentially disabling rewind/fast-forward functionality for certain platforms or scenarios. The throttle `if (now - lastTs < THROTTLE_MS)` condition was also commented out, removing the key press throttling.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\sideMenu\index.jsx` (2/2/2026, 17:36:09 & 2/2/2026, 17:36:22):**
    *   This React component implements a two-level side menu.
    *   It uses multiple `useState` and `useEffect` hooks to manage menu visibility, navigation states (`show_1st_mnu`, `show_2nd_mnu`, `navigate_2nd_mnu`), and selected options (`selL1`, `selL2`).
    *   The `AppMenuCreate` function initializes `window.AppMenu.vars`.
    *   `refreshSelectedOption` logic determines the currently selected menu item based on the current `location.pathname`.
    *   Menu data is dynamically generated based on `activeUser.type` (kid or standard) and settings.
    *   Includes functions to open/close menu levels (`openLevel1Menu`, `closeLevel1Menu`, `openLevel2Menu`, `closeLevel2Menu`, `exitMenu`).
    *   The `attachSearchAtTheBeginning` function dynamically adds a 'Search' menu item.
    *   `manageFocused` handles focus logic within the menu, including opening appropriate second-level menus (User or Explora).
    *   `navigateTo` handles navigation to different routes and manages `AppGlobal.Slider` and `AppGlobal.AllCatalog` states.
    *   Functions `fnDoChangeUser` and `fnExitApp` are defined for user management and exiting the application.
    *   **Minor change (2/2/2026, 17:36:22):** Reinstated `window.__isEntry = isMenuVisible;` in the first `useEffect` hook, which was likely present before the initial log entry.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\views\onboarding\usersScreen\index.jsx` (multiple timestamps, 2/2/2026):**
    *   This React component displays a screen for selecting users, including normal users, a "Super3" (kids) profile, and an "Add User" option.
    *   Manages loading state (`isLoading`) and user data (`users`).
    *   Uses `useAuthContext` for user authentication and state management (e.g., `getLoggedUsers`, `setActiveUser`, `setKidUser`).
    *   `onSelectUser`, `onSelectKids`, `onSelectAddUser` callbacks handle user selection and navigation.
    *   Conditional rendering for HbbTV platform to show a "Continue as guest" button.
    *   **Notable changes revolve around `window.__isEntry`:**
        *   (17:45:11) `window.__isEntry = location.state?.isEntry || false;`
        *   (18:04:11) `onBackClick={window.AppGlobal.Actions.openExitAppModal}` replaces `window.__isEntry ? ... : undefined`, making the back button always open the exit modal.
        *   (18:04:19) Uncomments `if (isLoading) exitKidMode();` in `useEffect`.
        *   (18:05:33) `window.__isEntry = true;` comments out the `location.state` check, forcing it to `true`.
        *   (18:06:13) Comments out `location = useLocation()` and `window.__isEntry` assignment, effectively removing `__isEntry`'s direct dependency on location state.
        *   (18:06:49) Reverts to `window.__isEntry = true;` and re-adds `location = useLocation()`.
        *   (18:09:47) Reverts to `window.__isEntry = location.state?.isEntry || false;`.
        *   (18:10:38) Reverts to `window.__isEntry = true;` within `useEffect`, indicating an intent to force this state.
        *   (18:14:59) Replaces `window.__isEntry = true;` with a new `window.__foceEntry = true;` and a cleanup for it, suggesting a new global flag for forced entry.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\utils\goBackHistory.js` (2/2/2026, 18:15:16):**
    *   Modifies the `goBackHistory` utility function.
    *   Adds `window.__isEntry` and `window.__foceEntry` to the conditions that trigger `callBackFunc()` (likely an exit application modal) instead of `window.history.go(-1)`. This aligns with the changes in `usersScreen`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\App.jsx` (multiple timestamps, 2/2/2026 & 4/2/2026):**
    *   The main application component, responsible for routing, context providers, and overall layout.
    *   Initializes platform and keyboard functions (`InitApp`, `Platform.initPlatform`, `Platform.initKeyboard`).
    *   Provides debugging information via `BuildInfo` component, showing environment, user agent, versions, platform, and resolutions, controlled by `window.appConfig.test_app` flags.
    *   Sets up `window.AppGlobal.Actions.openExitAppModal` and `openCloseSessionModal`.
    *   The `openExitAppModal` function handles showing the `ExitAppModal`.
    *   `handleOk` processes exit/logout actions, including logic for kid mode (`UserType.KID`) to redirect to `usersScreen` or `/home`.
    *   Uses `BrowserRouter` with `Routes` and `Route` components for navigation, including `PublicRoute` and `PrivateRoute` for authentication.
    *   **Multiple commits show minor tweaks to the `openExitAppModal` function, specifically commenting/uncommenting the lines `window.isUserModalVisible = true; nav.storedFocus = nav.getCurrentId(); setExitModal(ModalTypes.EXIT);` and `window.AppMenu.manageFocused?.();`**. These changes fluctuate between directly showing the modal and potentially managing menu focus before the modal appears. The final state at 19:14:36 ensures `window.isUserModalVisible` is set, focus is stored, and the exit modal is displayed.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\build_templates\tizen\3cat_pro\config.xml` (3/2/2026, 13:24:24 & 5/2/2026, 10:47:12 & 5/2/2026, 11:41:17):**
    *   This XML configuration file is for Tizen applications.
    *   It defines application metadata, including `id`, `version`, `name`, and required privileges (e.g., `internet`, `application.launch`).
    *   **Major change (5/2/2026, 10:47:12):** The `id` attribute of the `<widget>` element and the `id` and `package` attributes of the `<tizen:application>` element were modified, changing the identifier from `http://tizen.tv3.ccma.cat.qa` to `http://tizen.qa.ccma.cat` and `PzkKxRdFT6.TV3.qa` to `PzkKxRdFT6qa.TV3`. This indicates a change in the application's unique identifier, likely for a QA environment.
    *   The 5/2/2026, 11:41:17 commit shows no functional change, possibly a re-save or formatting change.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\items\rowItems\roundItem\index.jsx` (multiple timestamps, 4/2/2026):**
    *   This React component renders round-shaped items within rows.
    *   It determines the image and type based on `item.images` and `isKidsProfile`.
    *   Uses `registerFocusAction` and `unregisterFocusAction` for custom focus handling.
    *   **Numerous changes related to "kid-mode" and "big-round" items:**
        *   (11:36:24) Comments out the `isKidsProfile` conditional image logic and always looks for 'round' or 'logo'.
        *   (11:41:47) Reinstates the `isKidsProfile` conditional image logic, where `kids-round` items look for `round` format images.
        *   (12:08:06) For `isKidsProfile`, it now looks for `big-round` image format instead of `round`.
        *   (12:21:39) Removes `isKidsProfile` from the `type` determination, `kids-round` type is no longer explicitly set based on `isKidsProfile` here. It only checks for `round` or `logo`. The class name logic still checks for `type === 'kids-round'`.
        *   (12:56:53) Removes `isKidsProfile` from props and `useMemo` dependency, simplifying image logic.
        *   (13:44:19) Reintroduces `isKidsProfile` logic in `useMemo` for image selection.
        *   (13:44:59) Introduces `isBigRound` prop, and if `isBigRound` is true, it looks for an image with `image_format === 'round'` and sets `type` to `big-round`.
        *   (13:45:13) Corrects a typo in the `className` conditional (`type === '-round'`).
        *   (13:45:24) Corrects the typo `type === '-round'` to `type === 'big-round'`.
        *   (13:48:20) For `isBigRound`, it explicitly looks for `image_format === 'big-round'`, rather than just 'round'.
        *   (14:01:29) Adds `data-nav-fixed-focus-shape={isBigRound ? 'bigRound' : 'round'}`, dynamically setting the focus shape.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\rowUtils.js` (4/2/2026, 12:01:27 & 4/2/2026, 12:01:36):**
    *   Utility function `getRowkind` determines the row type based on `rowData.format` or `rowData.collection`.
    *   **Minor fix (4/2/2026, 12:01:36):** Changes `square-mini` to `square_mini` for consistency in `ROUND` rowkind determination.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\genericRow\index.jsx` (multiple timestamps, 4/2/2026):**
    *   A generic component for rendering various types of content rows.
    *   Uses `getRowkind` to determine the `RowElement` component to render (e.g., `LandscapeItem`, `PortraitItem`, `SquareItem`).
    *   `generateShowAllElements` creates a "Show All" button for rows with more items.
    *   **Changes related to `isKidsProfile` and `rowType`:**
        *   (12:49:54) Adds `case 'SQUARE_MINI': return SquareItem;` to `getRowElement` and `case 'SQUARE_MINI': return 'square';` to `getShowAllElementsFocusShape`.
        *   (12:54:35) Removes the `isKidsProfile && <div className="roundItemTitle">{item.title}</div>` conditional rendering from the very end of the component.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\items\rowItems\roundItem\styles.kids.scss` (multiple timestamps, 4/2/2026):**
    *   Dedicated styles for `roundElement` in "kid-mode".
    *   **Multiple changes involving `background-color` and `border`:**
        *   (12:22:36) Comments out `background-color`.
        *   (12:22:48) Reinstates `background-color: $base-color-3cat-kid-bright-purple;`.
        *   (12:23:43) Adds `border: 5px solid $base-color-3cat-kid-bright-purple !important;`.
        *   (12:25:30) Removes the added border, reverting to just `background-color`.
        *   (13:54:47) Reinstates `border: 5px solid $base-color-3cat-kid-bright-purple !important;`.
        *   (14:12:14) Removes the border, reverting to just `background-color`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\fixedFocus\fixedFocus.kids.scss` (multiple timestamps, 4/2/2026):**
    *   Styles for the fixed focus element in "kid-mode".
    *   **Frequent changes to focus outline and shadow:**
        *   (12:26:49) Sets `box-shadow`, `_outline`, `border-color`, and removes `border`/`outline` from `.inner`. Also comments out a `&.round` style block.
        *   (12:33:20) Simplifies `.inner` styles, removing `_outline`, `border`, `outline`.
        *   (12:35:24) Reinstates `_outline`, `border: 0px`, `outline: 0px`.
        *   (12:35:49) Simplifies again, removing `_outline`, `border`, `outline`.
        *   (12:37:39) Adds a `3px solid #be2649` `outline` to `.inner` and uncommented `&.round` block with specific width, height, shadow, and border for round items.
        *   (12:37:59) Changes `.inner` outline to `$base-color-3cat-kid-light-purple` and removes outline from `&.round .inner`.
        *   (12:42:40) Reinstates outline for `.inner` to `$base-color-3cat-kid-light-purple` and re-adds specific width, height, shadow, and border to `&.round .inner`.
        *   (12:43:30) Reverts `.inner` to `_outline` and removes `border`/`outline` and re-adds specific width, height, shadow, and border for `&.round .inner`.
        *   (12:44:18) Sets `.inner` outline to `$base-color-3cat-kid-light-purple` and removes outline from `&.round .inner`.
        *   (14:02:51) Sets outline to `3px solid $base-color-3cat-kid-light-purple`.
        *   (14:06:31) Removes the explicit `outline` from `.inner`.
        *   (14:14:22) Adds `&.round, &.big-round { .inner { outline: 0px; } }`.
        *   (14:14:40) Corrects `&.big-round` to `&.bigRound`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\roundRow\index.jsx` (multiple timestamps, 4/2/2026):**
    *   React component specifically for rendering rows of round items.
    *   **Changes related to `isKidsProfile` and `isBigRound`:**
        *   (12:27:53) Sets `textAlign` to `center` if `isKidsProfile` is true.
        *   (12:30:58) Removes `styles.kids.scss` import, indicating child-specific styles were consolidated or removed from this component directly. `textAlign` conditional is also removed.
        *   (13:35:58) Reintroduces `isBigRound` prop (was `isKidsProfile`), setting `textAlign` to `center` if `isBigRound` is true, and conditionally renders a `roundItemTitle`.
        *   (13:38:35) Adds a conditional class name for the row wrapper: ``className={`row ${isBigRound ? 'biground_row' : 'round_row'}`}``.
        *   (13:42:39) Removes `styles.kids.scss` import.
        *   (12:56:05 & 12:57:05) Removes `isKidsProfile` prop.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\roundRow\styles.scss` (4/2/2026, 12:28:04 & 4/2/2026, 13:40:37):**
    *   Styles for `round_row`.
    *   **Change (4/2/2026, 13:40:37):** Introduces `biground_row` styles, defining different heights for `round_row` and `biground_row` using `calc()`. Consolidates common styles for both. Adds styling for `roundItemTitle`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\roundRow\styles.kids.scss` (4/2/2026, 12:30:18):**
    *   Comments out `height` adjustment for `round_row` in kid mode.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\rows\genericRow\styles.scss` (4/2/2026, 12:48:42):**
    *   Styles for various generic row types.
    *   Adds specific styles for `rowType_SQUARE_MINI` and adjusts heights for other row types.
    *   Adds `&.LANDSCAPE` and `&.PORTRAIT`, `&.SQUARE`, `&.SQUARE_MINI` to `.item-show-all` for specific button dimensions.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\views\page\index.jsx` (multiple timestamps, 4/2/2026):**
    *   The page component manages data fetching for home and content pages.
    *   It uses `useVirtualizedRows` for efficient rendering.
    *   `getHomeData` fetches home data, `getPageData` fetches content data.
    *   `filterChildren` dynamically filters rows based on `isLiveSupported`, `isShakaPlayerSupported`, `hbbtv` platform, and `activeUser.type` (kid mode).
    *   `refreshLives` and `checkTimeFrame` handle live content updates.
    *   **Minor change (4/2/2026, 13:26:44):** The `useEffect` cleanup function changes `document.addEventListener("evChangeUser", onReset);` to `document.removeEventListener("evChangeUser", onReset);` fixing a potential issue with event listeners.
    *   **Minor change (4/2/2026, 13:34:44):** `AppMenu.closeLevel1Menu()` is called unconditionally at the beginning of the `useEffect` that handles page data fetching.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\items\rowItems\roundItem\styles.scss` (4/2/2026, 13:53:09):**
    *   Styles for `.roundElement`.
    *   Introduces specific styling for `.biground_row .roundElement`, increasing its size and adjusting margins.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\fixedFocus\fixedFocus.scss` (multiple timestamps, 4/2/2026):**
    *   Defines styles for the fixed focus element for various shapes (`keyframe`, `round`, `bigRound`, `poster`, `square`, `landscape-mini`).
    *   **Major updates for `bigRound` and `round` focus states:**
        *   (14:02:04) Introduces `.bigRound` with same styles as `.round` for its `.inner`.
        *   (14:02:35) Updates `.bigRound .inner` to have different `width`, `height`, `box-shadow`, and `border` (using kid-light-purple color) compared to `.round`.
        *   (14:03:39) Reverts `.bigRound .inner` to use kid-light-purple and outline: 0px.
        *   (14:09:26) Updates the `.page` section to apply `top` and `left` positioning for both `&.round` and `&.bigRound` focus shapes.
        *   (14:26:06 & 14:26:27 & 14:26:32) Changes `bigRound .inner` box-shadow and border colors to `$base-color-3cat-kid-white !important`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\App.kids.scss` (4/2/2026, 14:18:09):**
    *   Adds a focused style for `.V-SCROLLABLE` elements in kid-mode, applying a specific box-shadow, border-color, and outline using `$base-color-3cat-kid-light-purple`.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\modals\externalContentModal\index.jsx` (4/2/2026, 15:12:08 & 4/2/2026, 15:15:17 & 4/2/2026, 15:17:01):**
    *   A component for displaying a modal for external content.
    *   Uses `PopupInfoGroup`, `GenericButton`, `ImageCropper`.
    *   Calculates `imgData` for image display.
    *   `useEffect` to focus on "btn-open-external" on mount and restore focus on unmount.
    *   **Changes (4/2/2026, 15:15:17):** Adds a conditional `partner` class to `popupLeft` div if `isPartner` is true, affecting its styling. Also adds a condition to `platformLogoContainer` to only render if `!isPartner`.
    *   **Changes (4/2/2026, 15:17:01):** Modifies `generateImageData` call to dynamically set `h` (height) based on `isPartner` (428 for partners, 544 otherwise). This likely changes the aspect ratio for partner content images in the modal.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\components\modals\externalContentModal\styles.scss` (4/2/2026, 15:15:02):**
    *   Styling for the `externalModalOverlay` and `externalPopup`.
    *   Includes specific dimensions and layout for `popupLeft` and `popupRight`.
    *   Adds styling for `promoTextRow` and `platformTextRow`, including icons and text styles.
    *   Adds a `&.partner` style to `.popupLeft`, reducing its `height` to 428px.

*   **`c:\Users\Usuario\Documents\Trabajo\MEDIAPRO\3cat_smarttv\src\libs\img.js` (multiple timestamps, 5/2/2026):**
    *   Provides utility functions for image handling, including `getImgProxyUrl`, `removeItemsFromArray`, `getBestImage`, `getBestImageV2`, `getLogoImage`, `getImageByFormat`, `generateImageData`, `generateImageDataFromLiveChannelInHome_v2`.
    *   Defines `IMGPROXY_PRESETS` for responsive image sizing.
    *   `NOT_ALLOWED_FORMATS` is a list of image formats to exclude.
    *   `getBestImageV2` has logic to filter images based on desired aspect ratio.
    *   **Changes related to `NOT_ALLOWED_FORMATS`:**
        *   (9:38:51) Adds `"square-round"` to `notAllowedFomats` in `getBestImageV2` (copy from `NOT_ALLOWED_FORMATS`).
        *   (9:40:12) Removes `"square-round"` from `notAllowedFomats` in `getBestImageV2`.
        *   (9:40:33) Removes the duplicate `"round"` entry from `NOT_ALLOWED_FORMATS`.
        *   (9:44:04) Adds `"big-round"` to `notAllowedFomats` in `getBestImageV2`.
        *   (9:46:50 & 9:46:57) The changes are minor, mostly formatting or re-saving the file.

**Recurring Patterns and General Trends:**

1.  **Kid Mode Development:** There's a strong recurring theme of "kid-mode" related changes. Many components (`RoundItem`, `RoundRow`, `Page`, `App`, `fixedFocus.kids.scss`, `App.kids.scss`) have conditional logic or dedicated stylesheets (`.kids.scss`) to adjust behavior, styling, or content filtering specifically for children's profiles. This indicates a significant focus on tailoring the user experience for kids.
2.  **Focus Management and Navigation:** The application heavily relies on `nav.focusById`, `registerFocusAction`, `unregisterFocusAction`, and `data-block-focus-*` attributes, suggesting a robust and potentially custom focus management system for TV remotes. `fixedFocus.scss` and `fixedFocus.kids.scss` are frequently updated, reinforcing this.
3.  **Platform Adaptations:** The `app.js` (gateway) and `platform/generic.js` (keyboard) files show explicit handling for different Smart TV platforms (WebOS, Tizen, HbbTV), adjusting URLs, service requests, and key event processing accordingly.
4.  **UI Component Refinement:** Many changes involve fine-tuning the appearance and behavior of UI components, such as `MediaTitle` styling, `PortraitItem` focus/hover, `Keyboard` key appearance, and `RoundItem` image selection and sizing.
5.  **Dynamic Content and Data Handling:** Components like `infoGroup` and `Page` demonstrate logic for dynamic content display (e.g., episode/season counts, expiration dates, live stream status, external content) and efficient data fetching/filtering.
6.  **Image Optimization:** The `libs/img.js` file, with its `IMGPROXY_PRESETS` and functions like `getImgProxyUrl`, `getBestImage`, `getBestImageV2`, highlights a strategy for optimizing and dynamically serving images based on format, size, and aspect ratio. The `NOT_ALLOWED_FORMATS` list is a common point of modification.
7.  **`window.AppGlobal` Usage:** The `window.AppGlobal` object is extensively used across various files (`platform/generic.js`, `sideMenu/index.jsx`, `App.jsx`, `page/index.jsx`, `utils/goBackHistory.js`) as a central hub for application-wide state, actions, and utilities, indicating a global state management pattern.
8.  **Modal Management:** There's consistent development around modals, particularly for external content and application exit/logout (`ExternalContentModal`, `ExitAppModal`). The `App.jsx` and `page/index.jsx` files manage their visibility and interactions.

Overall, the changes paint a picture of an active development cycle focused on improving the user experience, enhancing platform compatibility, optimizing performance (especially for images), and robustly implementing features like "kid-mode" and content delivery for a Smart TV application.