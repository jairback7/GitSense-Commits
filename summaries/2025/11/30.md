# Activity Summary for 30/11/2025

## 0:30:12
The `package.json` file for the `3cat_smarttv` project, timestamped 28/11/2025 at 7:51:58, outlines a comprehensive build, development, and deployment pipeline. The project is currently at version `0.9.4`, build `319`, dated `2025-11-13`.

**Key Updates and Configurations:**

*   **Version Management Scripts**: A set of `upgrade_version`, `upgrade_build`, `upgrade_date`, and `upgrade_env` scripts are defined, all executed via `node` commands, to manage project metadata. The `upgrade` script combines all these operations.
*   **Local Development Modes**: Multiple `vite` commands are configured for local development, supporting various modes like `dev`, `dev-local`, `dev-local:dummy`, `dev-local:dev`, `dev-local:pre`, and `dev-local:prod`, allowing testing against different environments.
*   **Targeted Builds**: The project supports builds for specific platforms and application types:
    *   **Base Device Builds**: Dedicated `vite build` commands for `webOS` and `Tizen`.
    *   **SmartTV Builds**: `vite build` commands target `dist/smarttv` for `development`, `preproduction`, and `production` modes, along with a `watch:smarttv` command.
    *   **HBBTV Builds**: Similar `vite build` commands target `dist/hbbtv` for various environments, including a general `build:hbbtv` with watch.
*   **Preview and Start Scripts**: `vite preview` commands are set up for `webOS`, `Tizen`, and `HbbTV` to serve built distributions. Corresponding `start` scripts combine preview and build operations.
*   **Linting**: An `eslint` command is included for code quality checks.
*   **Device Packaging**:
    *   **Launcher Apps**: Scripts using `package-launcher-apps.cjs` are defined for packaging `launcher_app` for `webOS` and `Tizen` across `DEV`, `PRE`, and `PRO` environments, with `all` scripts to run all variants.
    *   **Embedded Apps**: Placeholder "TODO" scripts are present for packaging `embedded_app` for `webOS` and `Tizen` across different environments.
*   **Hosted Webapp Builds**: Specific `vite build` commands generate hosted webapps for `SmartTV` and `HbbTV` into `dist/hosted_apps/smarttv_dev|pre|prod` and `dist/hosted_apps/hbbtv_dev|pre|prod` respectively, with `all` scripts to build all environments.
*   **Deployment**: Deployment scripts utilize `gsutil` to copy built hosted webapps to Google Cloud Storage (GCS) buckets (`gs://smartv-dev|pre|pro` and `gs://hbbtv-dev|pre|pro`), applying a `Cache-Control: max-age=5` header.
*   **Dependencies**: Key runtime dependencies include `react`, `react-dom`, `react-router-dom`, `whatwg-fetch`, `youboralib`, and `jwt-decode`.
*   **Dev Dependencies**: Development tools include `@million/lint`, `@vitejs/plugin-legacy`, `@vitejs/plugin-react`, `current-device`, `dotenv`, `eslint` and its React plugins, `js-cookie`, `lodash`, `sass`, `terser`, `ua-parser-js`, `uuid`, and `vite`.

**Patterns and Recurring Elements:**

*   **Vite-centric Workflow**: The project heavily relies on Vite for development, building, and previewing across all environments and platforms.
*   **Environment-Specific Configurations**: A consistent pattern of `development`, `preproduction`, and `production` (or `DEV`, `PRE`, `PRO`) modes is applied to builds, packaging, and deployments.
*   **Platform-Specific Targets**: The project explicitly targets `webOS`, `Tizen`, `SmartTV`, and `HbbTV`, indicating a multi-platform smart TV application development focus.
*   **Structured Scripting**: The `scripts` section is well-organized with numbered categories and descriptive comments, making the automation steps clear.
*   **Automated Packaging and Deployment**: There's a clear pipeline for building, packaging (both launcher and hosted apps), and deploying hosted webapps to cloud storage.
*   **Modular Node Scripts**: Custom Node.js scripts (`check-versions.js`, `check-build-number.js`, `check-date.js`, `update-env-from-package.js`, `package-launcher-apps.cjs`) are used for specific automation tasks beyond what Vite provides.

## 4:11:49
The provided log details changes to the `package.json` file for a project named `3cat_smarttv`, recorded at `28/11/2025, 7:51:58`. The file indicates a project version `0.9.4`, build `319`, and an internal date of `2025-11-13 21:13:34`.

**Key Information from `package.json`:**

*   **Project Configuration:** The project is configured as a `module`.
*   **Extensive Script Section:** The `scripts` section is highly organized with numbered comments categorizing various operations:
    *   **Upgrade Management:** Scripts (`upgrade_version`, `upgrade_build`, `upgrade_date`, `upgrade_env`) automate the updating of project version, build number, date, and environment variables using dedicated Node.js scripts. A combined `upgrade` script runs all these.
    *   **Development Modes:** Multiple `dev` scripts use `vite` to launch the application in different local development modes (`--host`, `dummy`, `development`, `preproduction`, `production`).
    *   **Platform-Specific Builds:** Comprehensive build scripts target specific SmartTV platforms:
        *   **Base Devices:** `webOS` and `Tizen` using `vite build`.
        *   **SmartTV & HbbTV:** Dedicated `vite build` commands for `smarttv` and `hbbtv` across `development`, `preproduction`, and `production` environments, outputting to `dist/smarttv` and `dist/hbbtv` respectively, and including `watch` scripts.
    *   **Preview & Start:** `vite preview` commands for `webOS`, `Tizen`, and `HbbTV` for serving built distributions, complemented by `start` scripts that combine previewing and building.
    *   **Linting:** An `eslint` script is configured for code quality checks.
    *   **Device Packaging:**
        *   **Launcher Apps:** Scripts utilize a `package-launcher-apps.cjs` Node.js script to package launcher applications for `webOS` and `Tizen` across `DEV`, `PRE`, and `PRO` environments, with `all` scripts to run all variants for each platform.
        *   **Embedded Apps:** Placeholder "TODO" scripts exist for packaging embedded applications for `webOS` and `Tizen` across various environments.
    *   **Hosted Webapp Builds:** Scripts for building `smarttv` and `hbbtv` hosted web applications for `development`, `preproduction`, and `production` environments, outputting to `dist/hosted_apps/` with environment-specific subdirectories.
    *   **Deployment:** `gsutil` commands are used to deploy the built hosted web applications to specific Google Cloud Storage (GCS) buckets (e.g., `gs://smartv-dev`, `gs://hbbtv-pre`) for each platform and environment, applying a `Cache-Control: max-age=5` header.
*   **Dependencies:** Includes standard React libraries (`react`, `react-dom`, `react-router-dom`), `whatwg-fetch` for Fetch API polyfill, `youboralib` for video analytics, and `jwt-decode` for JWT handling.
*   **Dev Dependencies:** Contains a wide array of development tools, including Vite and its plugins (`@vitejs/plugin-legacy`, `@vitejs/plugin-react`), linting tools (`eslint`, `eslint-plugin-react`, `@million/lint`), device detection utilities (`current-device`, `ua-parser-js`), `dotenv` for environment variables, `lodash`, `sass`, `terser` for minification, `uuid`, and `js-cookie`.

**Patterns and Recurring Elements:**

*   **Vite-centric Workflow:** The project heavily relies on `Vite` for development, building, and previewing across all platforms and environments.
*   **Environment and Platform Segmentation:** There is a consistent pattern of defining scripts for `development`, `preproduction`, and `production` (often abbreviated as `dev`, `pre`, `prod`) and for specific platforms (`webOS`, `Tizen`, `SmartTV`, `HbbTV`).
*   **Structured Scripting:** The `scripts` section is meticulously organized using numbered comments, indicating a well-defined build and deployment pipeline.
*   **"All" Aggregation Scripts:** Many sections include an `all` script (e.g., `package:launcher_app:all`, `build:hosted_webapp:all`) to execute all related tasks for different environments or platforms.
*   **Cloud Deployment:** Google Cloud Storage (`gsutil`) is the chosen method for deploying hosted web applications, with consistent cache control settings.